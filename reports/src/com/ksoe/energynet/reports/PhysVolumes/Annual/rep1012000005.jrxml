<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rep1012000005" pageWidth="1060" pageHeight="842" orientation="Landscape" columnWidth="1000" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" isIgnorePagination="true">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="DepartmentCode" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(10)]]></defaultValueExpression>
	</parameter>
	<parameter name="ReportCode" class="java.lang.Integer" isForPrompting="false">
		<defaultValueExpression><![CDATA[1012000005]]></defaultValueExpression>
	</parameter>
	<parameter name="YearGen" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(2010)]]></defaultValueExpression>
	</parameter>
	<parameter name="planKindCode" class="java.lang.Integer">
		<parameterDescription><![CDATA[Вид планов:
1 - годовые
2 - месячные]]></parameterDescription>
	</parameter>
	<parameter name="geoDeptCode" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="geoDeptName" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select
name.Totalcode,
elname,
length,
(case
	when name.planfact = 1 then 'січень'
	when name.planfact = 2 then 'лютий'
    when name.planfact = 3 then 'березень'
	when name.planfact = 4 then 'квітень'
    when name.planfact = 5 then 'травень'
    when name.planfact = 6 then 'червень'
    when name.planfact = 7 then 'липень'
    when name.planfact = 8 then 'серпень'
    when name.planfact = 9 then 'вересень'
    when name.planfact = 10 then 'жовтень'
    when name.planfact = 11 then 'листопад'
    when name.planfact = 12 then 'грудень'
else ''
end) as plans,
depname as depname,
p1, p2, p3, p4

from

/* Наименование и планфакт */
(
/* 1 січень */
select distinct
cast((cast(EL.code as varchar) || '01') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
1 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 2 лютий */
select distinct
cast((cast(EL.code as varchar) || '02') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
2 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 3 березень */
select distinct
cast((cast(EL.code as varchar) || '03') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
3 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 4 квітень */
select distinct
cast((cast(EL.code as varchar) || '04') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
4 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 5 травень */
select distinct
cast((cast(EL.code as varchar) || '05') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
5 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 6 червень */
select distinct
cast((cast(EL.code as varchar) || '06') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
6 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 7 липень */
select distinct
cast((cast(EL.code as varchar) || '07') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
7 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 8 серпень */
select distinct
cast((cast(EL.code as varchar) || '08') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
8 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 9 вересень */
select distinct
cast((cast(EL.code as varchar) || '09') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
9 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 10 жовтень */
select distinct
cast((cast(EL.code as varchar) || '10') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
10 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 11 листопад */
select distinct
cast((cast(EL.code as varchar) || '11') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
11 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all

/* 12 грудень */
select distinct
cast((cast(EL.code as varchar) || '12') as numeric) as TotalCode,
(LI.name || ' № ' || LI.invnumber) as elname,
LI.linelength as length,
de.name as depname,
12 as planfact, 0 as sort
from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enlinecable as LI on EL.code = LI.elementcode
inner join endepartment as DE on PW.departmentrefcode = DE.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
inner join tktechcard as TC ON PI.kartarefcode = TC.code
inner join tkreportitem2techcard as RITC on TC.code = RITC.techcardcode
inner join tkreportitem as RI on RITC.reportitemcode=RI.code
inner join tkreport as RE on RI.reportrefcode=RE.code
where
RE.code = $P{ReportCode} /* номер отчета */
and PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

union all


/* Наименование За рік */
select distinct
(-24) as TotalCode,
('За рік') as elname,
null::double precision as length,
null as depname,
13 as planfact, 1 as sort

) as name

inner join

/* Даннные */
(select
(CASE
    WHEN pw.monthgen = 1 THEN cast((cast(EL.code as varchar) || '01') as numeric)
    WHEN pw.monthgen = 2 THEN cast((cast(EL.code as varchar) || '02') as numeric)
    WHEN pw.monthgen = 3 THEN cast((cast(EL.code as varchar) || '03') as numeric)
    WHEN pw.monthgen = 4 THEN cast((cast(EL.code as varchar) || '04') as numeric)
    WHEN pw.monthgen = 5 THEN cast((cast(EL.code as varchar) || '05') as numeric)
    WHEN pw.monthgen = 6 THEN cast((cast(EL.code as varchar) || '06') as numeric)
    WHEN pw.monthgen = 7 THEN cast((cast(EL.code as varchar) || '07') as numeric)
    WHEN pw.monthgen = 8 THEN cast((cast(EL.code as varchar) || '08') as numeric)
    WHEN pw.monthgen = 9 THEN cast((cast(EL.code as varchar) || '09') as numeric)
    WHEN pw.monthgen = 10 THEN cast((cast(EL.code as varchar) || '10') as numeric)
    WHEN pw.monthgen = 11 THEN cast((cast(EL.code as varchar) || '11') as numeric)
    WHEN pw.monthgen = 12 THEN cast((cast(EL.code as varchar) || '12') as numeric)
    ELSE null
END) as TotalCode,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000029)) as p1,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000030)) as p2,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000031)) as p3,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000032)) as p4

from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
where
PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */

group by totalcode

union all

/* За рік */
select
(-24) as TotalCode,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000029)) as p1,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000030)) as p2,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000031)) as p3,

sum((select PI1.countgen
from enplanworkitem as PI1 inner join
(tktechcard as TC1 inner join
tkreportitem2techcard as RITC1
on TC1.code=RITC1.techcardcode)
on PI1.kartarefcode=TC1.code
where
PI1.code=PI.code
and RITC1.reportitemcode = 1012000032)) as p4

from
enplanwork as PW
inner join enelement as EL on PW.elementrefcode = EL.code
inner join enplanworkitem as PI on PW.code = PI.planrefcode
where
PW.yeargen = $P{YearGen} /* год */
and (case when $P{DepartmentCode} <> 0 then PW.departmentrefcode = $P{DepartmentCode} /* підрозділ */ when $P{DepartmentCode} = 0 then PW.departmentrefcode = PW.departmentrefcode end)
and (case when $P{geoDeptCode} <> 0 then el.geodepartmentrefcode = $P{geoDeptCode} /* geo підрозділ */ when $P{geoDeptCode} = 0 then 1=1 end)
and pw.kindcode = $P{planKindCode} /* вид плана */
and PW.typerefcode in (1) /* планові */
and PW.statuscode in (1,3,4,5,7,8) /* затверджені і чорнові */
 /*SUPP-61313 Планы со статусом работы завершены берутся только те, что с актами*/
and case when pw.statuscode = 8 then exists (select 1 from enplancorrecthistory as pco1
inner join enplancorrecthistory as pco2 on pco1.planrefcode = pco2.planrefcode
where
pw.code in (pco1.planoldrefcode, pco1.plannewrefcode)
and pco2.reasoncode = 5) else 1=1 end
and PW.budgetrefcode IN (75000001, 500000007) /* СРМ, СКЕМ */
and PW.staterefcode = 1 /* КР */
and EL.typerefcode = 11 /* КЛ 0.4-6-10 кВ */


) as summary

on name.totalcode=summary.totalcode

order by name.sort, name.totalcode asc]]>
	</queryString>
	<field name="totalcode" class="java.math.BigDecimal"/>
	<field name="elname" class="java.lang.String"/>
	<field name="plans" class="java.lang.String"/>
	<field name="depname" class="java.lang.String"/>
	<field name="p1" class="java.lang.Double"/>
	<field name="p2" class="java.lang.Double"/>
	<field name="p3" class="java.lang.Double"/>
	<field name="p4" class="java.lang.Double"/>
	<field name="length" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="100" splitType="Stretch">
			<subreport isUsingCache="true">
				<reportElement key="subreport-3" x="0" y="0" width="1000" height="100"/>
				<subreportParameter name="geoDeptName">
					<subreportParameterExpression><![CDATA[$P{geoDeptName}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ReportCode">
					<subreportParameterExpression><![CDATA[$P{ReportCode}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="geoDeptCode">
					<subreportParameterExpression><![CDATA[$P{geoDeptCode}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="DepartmentCode">
					<subreportParameterExpression><![CDATA[$P{DepartmentCode}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="YearGen">
					<subreportParameterExpression><![CDATA[$P{YearGen}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[getClass().getResourceAsStream("/com/ksoe/energynet/reports/PhysVolumes/Annual/Header.jasper")]]></subreportExpression>
			</subreport>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="169" splitType="Stretch">
			<staticText>
				<reportElement key="staticText-1" x="0" y="0" width="360" height="152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[Найменування об'єкту]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-2" x="460" y="0" width="100" height="152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement rotation="Left"/>
				<text><![CDATA[Місяць]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-3" x="560" y="0" width="60" height="152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement rotation="Left"/>
				<text><![CDATA[Установка з'єднувальних муфт на КЛ  0.4 кВ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-4" x="620" y="0" width="60" height="152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement rotation="Left"/>
				<text><![CDATA[Установка кінцевих муфт на КЛ 0.4 кВ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-6" x="680" y="0" width="60" height="152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement rotation="Left"/>
				<text><![CDATA[Установка з'єднувальних муфт на КЛ 6-10 кВ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-7" x="740" y="0" width="60" height="152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement rotation="Left"/>
				<text><![CDATA[Установка кінцевих муфт на КЛ 6-10 кВ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-19" x="0" y="152" width="360" height="17"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-20" x="460" y="152" width="100" height="17"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-21" x="680" y="152" width="60" height="17"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[ШТ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-22" x="740" y="152" width="60" height="17"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[ШТ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-25" x="620" y="152" width="60" height="17"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[ШТ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-28" x="560" y="152" width="60" height="17"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[ШТ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-37" x="800" y="0" width="200" height="152">
					<printWhenExpression><![CDATA[new Boolean($P{DepartmentCode}.intValue() == 0)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement rotation="Left"/>
				<text><![CDATA[Підрозділ]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-38" x="800" y="152" width="200" height="17">
					<printWhenExpression><![CDATA[new Boolean($P{DepartmentCode}.intValue() == 0)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-2" x="360" y="0" width="100" height="152"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement rotation="Left"/>
				<text><![CDATA[Довжина лінії, км.]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-20" x="360" y="152" width="100" height="17"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None"/>
				<text><![CDATA[]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="17" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-1" stretchType="RelativeToTallestObject" x="0" y="0" width="360" height="17" forecolor="#000000"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{elname}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-2" stretchType="RelativeToTallestObject" x="460" y="0" width="100" height="17" forecolor="#000000"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{plans}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#0.#######" isBlankWhenNull="true">
				<reportElement key="textField-3" stretchType="RelativeToTallestObject" x="560" y="0" width="60" height="17" forecolor="#000000"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{p1}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#0.#######" isBlankWhenNull="true">
				<reportElement key="textField-4" stretchType="RelativeToTallestObject" x="620" y="0" width="60" height="17" forecolor="#000000"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{p2}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#0.#######" isBlankWhenNull="true">
				<reportElement key="textField-6" stretchType="RelativeToTallestObject" x="680" y="0" width="60" height="17" forecolor="#000000"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{p3}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#0.#######" isBlankWhenNull="true">
				<reportElement key="textField-7" stretchType="RelativeToTallestObject" x="740" y="0" width="60" height="17" forecolor="#000000"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{p4}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-19" stretchType="RelativeToTallestObject" x="800" y="0" width="200" height="17" forecolor="#000000">
					<printWhenExpression><![CDATA[new Boolean($P{DepartmentCode}.intValue() == 0)]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{depname}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#0.#######" isBlankWhenNull="true">
				<reportElement key="textField-2" stretchType="RelativeToTallestObject" x="360" y="0" width="100" height="17" forecolor="#000000"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{length}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="30" splitType="Stretch">
			<subreport isUsingCache="true">
				<reportElement key="subreport-2" x="0" y="0" width="1000" height="30"/>
				<subreportParameter name="geoDeptName">
					<subreportParameterExpression><![CDATA[$P{geoDeptName}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="planKindCode">
					<subreportParameterExpression><![CDATA[$P{planKindCode}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="geoDeptCode">
					<subreportParameterExpression><![CDATA[$P{geoDeptCode}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="DepartmentCode">
					<subreportParameterExpression><![CDATA[$P{DepartmentCode}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="YearGen">
					<subreportParameterExpression><![CDATA[$P{YearGen}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[getClass().getResourceAsStream("/com/ksoe/energynet/reports/PhysVolumes/Annual/subrep1012000005.jasper")]]></subreportExpression>
			</subreport>
		</band>
	</summary>
</jasperReport>
