<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="repEnergobyt" pageWidth="1000" pageHeight="595" orientation="Landscape" columnWidth="940" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" isIgnorePagination="true">
	<property name="ireport.scriptlethandling" value="2"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="showFinexecutor" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(1)]]></defaultValueExpression>
	</parameter>
	<parameter name="departmentCode" class="java.lang.String">
		<defaultValueExpression><![CDATA[new String("4")]]></defaultValueExpression>
	</parameter>
	<parameter name="monthGen" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(3)]]></defaultValueExpression>
	</parameter>
	<parameter name="yearGen" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(2012)]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select planworktypename , planworkstatename  , name_classification  ,
       finexecutorname, fincode ,
       sum(zaplanirovano) as zaplanirovano ,
sum(vipolneno) as vipolneno ,
sum(inwork) as inwork from  (


select invnumber,elcode, elname,
rpaddress,
case when $P{showFinexecutor} = 1 then  finexecutorname else '0' end  as finexecutorname ,
case when $P{showFinexecutor} = 1 then  fincode else 0 end  as fincode ,
planworktypename, planworkstatename, department, cnn,
d1, d2, d3, d4, d5,
d6, d7, d8, d9, d10,
d11, d12, d13, d14, d15,
d16, d17, d18, d19, d20,
d21, d22, d23, d24, d25,
d26, d27, d28, d29, d30, d31,
 monthstring ,
 name_classification ,
 form
,codemonthplan
       , case when date_start_work = '01.01.3000' then 'Немає даних'
              when date_start_work = '01.01.3001' then 'ТМЦ непотрібні'
              else date_start_work end as date_start_work
      , case /*when ( isobligatory is null or isobligatory = 0 )  then 0 -- не выделяем в отчете */
             when date_start_work = '01.01.3000' then 1 -- выделение в отчете
             when (date_start_work <> '01.01.3000' and date_start_work <> '01.01.3001'  and to_date(date_start_work,'dd.mm.yyyy') > last_day( to_date('01.'||$P{monthGen}||'.'||$P{yearGen},'dd.mm.yyyy')) ) then 1  -- выделение в отчете
             when (date_start_work <> '01.01.3000' and date_start_work <> '01.01.3001'  and to_date(date_start_work,'dd.mm.yyyy')  between to_date('01.'||$P{monthGen}||'.'||$P{yearGen},'dd.mm.yyyy') and  last_day( to_date('01.'||$P{monthGen}||'.'||$P{yearGen},'dd.mm.yyyy')) ) then 0  -- не выделяем в отчете
             when date_start_work = '01.01.3001' then 0  -- не выделяем в отчете
       end as pr_date_start_work
, ( select coalesce(pw.totaltimedays,0) from enplanwork pw where pw.code =  codemonthplan  )  as totaltimedays
, case when
d1 in (21,23 , 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d2 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d3 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d4 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d5 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d6 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d7 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d8 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d9 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d10 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d11 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d12 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d13 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d14 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d15 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d16 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d17 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d18 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d19 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d20 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d21 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d22 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d23 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d24 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d25 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d26 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d27 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d28 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d29 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d30 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199) or
d31 in (21,23, 54 , 56 , 64 , 66 , 97 , 99 ,199)  then 1 else 0 end as zaplanirovano
, case when
d1 in (43,66,76,99) or
d2 in (43,66,76,99) or
d3 in (43,66,76,99) or
d4 in (43,66,76,99) or
d5 in (43,66,76,99) or
d6 in (43,66,76,99) or
d7 in (43,66,76,99) or
d8 in (43,66,76,99) or
d9 in (43,66,76,99) or
d10 in (43,66,76,99) or
d11 in (43,66,76,99) or
d12 in (43,66,76,99) or
d13 in (43,66,76,99) or
d14 in (43,66,76,99) or
d15 in (43,66,76,99) or
d16 in (43,66,76,99) or
d17 in (43,66,76,99) or
d18 in (43,66,76,99) or
d19 in (43,66,76,99) or
d20 in (43,66,76,99) or
d21 in (43,66,76,99) or
d22 in (43,66,76,99) or
d23 in (43,66,76,99) or
d24 in (43,66,76,99) or
d25 in (43,66,76,99) or
d26 in (43,66,76,99) or
d27 in (43,66,76,99) or
d28 in (43,66,76,99) or
d29 in (43,66,76,99) or
d30 in (43,66,76,99) or
d31 in (43,66,76,99)  then 1 else 0 end as vipolneno

, case when
d1 not in (43,66,76,99) and
d2 not in (43,66,76,99) and
d3 not in (43,66,76,99) and
d4 not in (43,66,76,99) and
d5 not in (43,66,76,99) and
d6 not in (43,66,76,99) and
d7 not in (43,66,76,99) and
d8 not in (43,66,76,99) and
d9 not in (43,66,76,99) and
d10 not in (43,66,76,99) and
d11 not in (43,66,76,99) and
d12 not in (43,66,76,99) and
d13 not in (43,66,76,99) and
d14 not in (43,66,76,99) and
d15 not in (43,66,76,99) and
d16 not in (43,66,76,99) and
d17 not in (43,66,76,99) and
d18 not in (43,66,76,99) and
d19 not in (43,66,76,99) and
d20 not in (43,66,76,99) and
d21 not in (43,66,76,99) and
d22 not in (43,66,76,99) and
d23 not in (43,66,76,99) and
d24 not in (43,66,76,99) and
d25 not in (43,66,76,99) and
d26 not in (43,66,76,99) and
d27 not in (43,66,76,99) and
d28 not in (43,66,76,99) and
d29 not in (43,66,76,99) and
d30 not in (43,66,76,99) and
d31 not in (43,66,76,99)  then 1 else 0 end as inwork

from (
select ed.invnumber,qq.elcode, case when qq.cnn is null then
qq.elname || ' (№' || coalesce(ed.invnumber,'000000') || ')'
else
qq.elname || ' (№' || coalesce(ed.invnumber,'000000') || ')' ||
' (договор на присоед.№' || qq.cnn || ')' end as elname,
qq.rpaddress,
qq.finexecutorname, qq.fincode, qq.planworktypename, qq.planworkstatename, edn.name as department, qq.cnn,
sum(day1) as d1, sum(day2) as d2, sum(day3) as d3, sum(day4) as d4, sum(day5) as d5,
sum(day6) as d6, sum(day7) as d7, sum(day8) as d8, sum(day9) as d9, sum(day10) as d10,
sum(day11) as d11, sum(day12) as d12, sum(day13) as d13, sum(day14) as d14, sum(day15) as d15,
sum(day16) as d16, sum(day17) as d17, sum(day18) as d18, sum(day19) as d19, sum(day20) as d20,
sum(day21) as d21, sum(day22) as d22, sum(day23) as d23, sum(day24) as d24, sum(day25) as d25,
sum(day26) as d26, sum(day27) as d27, sum(day28) as d28, sum(day29) as d29, sum(day30) as d30, sum(day31) as d31,
        case when $P{monthGen}  = '1' then 'Січень'
             when $P{monthGen}  = '2' then 'Лютий'
             when $P{monthGen}  = '3' then 'Березень'
             when $P{monthGen}  = '4' then 'Квітень'
             when $P{monthGen}  = '5' then 'Травень'
             when $P{monthGen}  = '6' then 'Червень'
             when $P{monthGen}  = '7' then 'Липень'
             when $P{monthGen}  = '8' then 'Серпень'
             when $P{monthGen}  = '9' then 'Вересень'
             when $P{monthGen}  = '10' then 'Жовтень'
             when $P{monthGen}  = '11' then 'Листопад'
             when $P{monthGen}  = '12' then 'Грудень' end as monthstring ,
             name_classification ,
             case qq.formrefcode when 1 then 'Плановые работы' when 2 then 'Неплановые работы' end as form
,codemonthplan
, (select net.get_date_start_works2(codemonthplan::numeric , (select pw.datestart from enplanwork pw where pw.code = codemonthplan limit 1  )  , (select pw.datefinal from enplanwork pw where pw.code = codemonthplan limit 1  ) ) ) as date_start_work
 from

(

select q1.elcode, q1.elname,q1.rpaddress, q1.finexecutorname, q1.planworktypename, q1.planworkstatename, q1.code, q1.kind, q1.department, q1.fincode, q1.cnn,

case when (q1.day1 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day1 + 100 else q1.day1 end as day1,

case when (q1.day2 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day2 + 100 else q1.day2 end as day2,

case when (q1.day3 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day3 + 100 else q1.day3 end as day3,

case when (q1.day4 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day4 + 100 else q1.day4 end as day4,

case when (q1.day5 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day5 + 100 else q1.day5 end as day5,

case when (q1.day6 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day6 + 100 else q1.day6 end as day6,

case when (q1.day7 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day7 + 100 else q1.day7 end as day7,

case when (q1.day8 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day8 + 100 else q1.day8 end as day8,

case when (q1.day9 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day9 + 100 else q1.day9 end as day9,

case when (q1.day10 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day10 + 100 else q1.day10 end as day10,

case when (q1.day11 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day11 + 100 else q1.day11 end as day11,

case when (q1.day12 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day12 + 100 else q1.day12 end as day12,

case when (q1.day13 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day13 + 100 else q1.day13 end as day13,

case when (q1.day14 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day14 + 100 else q1.day14 end as day14,

case when (q1.day15 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day15 + 100 else q1.day15 end as day15,

case when (q1.day16 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day16 + 100 else q1.day16 end as day16,

case when (q1.day17 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day17 + 100 else q1.day17 end as day17,

case when (q1.day18 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day18 + 100 else q1.day18 end as day18,

case when (q1.day19 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day19 + 100 else q1.day19 end as day19,

case when (q1.day20 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day20 + 100 else q1.day20 end as day20,

case when (q1.day21 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day21 + 100 else q1.day21 end as day21,

case when (q1.day22 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day22 + 100 else q1.day22 end as day22,

case when (q1.day23 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day23 + 100 else q1.day23 end as day23,

case when (q1.day24 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day24 + 100 else q1.day24 end as day24,

case when (q1.day25 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day25 + 100 else q1.day25 end as day25,

case when (q1.day26 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day26 + 100 else q1.day26 end as day26,

case when (q1.day27 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day27 + 100 else q1.day27 end as day27,

case when (q1.day28 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day28 + 100 else q1.day28 end as day28,

case when (q1.day29 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day29 + 100 else q1.day29 end as day29,

case when (q1.day30 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day30 + 100 else q1.day30 end as day30,

case when (q1.day31 = 43 and
(select sum(case when coalesce(enpwi1.countgen,0) < coalesce(enpwi2.countgen,0) then 1 else 0 end)
 from
 enplanworkitem enpwi1 left join enplanworkitem enpwi2
 on enpwi1.kartarefcode = enpwi2.kartarefcode
where
enpwi1.planrefcode = q1.code
and enpwi2.planrefcode = (select planoldrefcode from enplancorrecthistory enpc where enpc.plannewrefcode = q1.code and enpc.reasoncode = 5)) > 0)
then q1.day31 + 100 else q1.day31 end as day31
, name_classification , q1.formrefcode , codemonthplan
from
(
select q.elcode, q.elname,q.rpaddress, q.finexecutorname, q.planworktypename, q.planworkstatename, q.code, q.kind, q.department, q.fincode, q.cnn,
case q.d1 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day1,
case q.d2 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day2,
case q.d3 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day3,
case q.d4 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day4,
case q.d5 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day5,
case q.d6 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day6,
case q.d7 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day7,
case q.d8 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day8,
case q.d9 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day9,
case q.d10 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day10,
  case q.d11 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day11,
case q.d12 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day12,
case q.d13 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day13,
case q.d14 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day14,
case q.d15 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day15,
case q.d16 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day16,
case q.d17 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day17,
case q.d18 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day18,
case q.d19 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day19,
case q.d20 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day20,
  case q.d21 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day21,
case q.d22 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day22,
case q.d23 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day23,
case q.d24 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day24,
case q.d25 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day25,
case q.d26 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day26,
case q.d27 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day27,
case q.d28 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day28,
case q.d29 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day29,
case q.d30 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day30,
  case q.d31 when 1 then
case q.kind when 2 then
case when q.status not in (3,7,8) then 21 else 23 end
            when 3 then
case when q.status <> 3 then 31 else 33 end
            when 4 then
case when q.status <> 3 then 41 else 43 end
              end
else 0 end as day31
, name_classification , q.formrefcode
,codemonthplan
 from
(select
  p.code,
  p.elementrefcode as elcode,
  e.ename as elname,
  coalesce(rppr.recordpointaddr,'')||coalesce(rpbyt.address,'') as rpaddress,
  coalesce (f.name,'Исполнитель не указан') as finexecutorname,
  case when f.code > 0 then 1 else 999 end as fincode,
  pwt.shortname as planworktypename,
  pws.shortname as planworkstatename,
  p.kindcode as kind,
  p.statuscode as status,
  p.departmentrefcode as department,
  p.priconnectionnumber as cnn,
  case when to_date('01.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d1,
  case when to_date('02.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d2,
  case when to_date('03.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d3,
  case when to_date('04.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d4,
  case when to_date('05.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d5 ,
  case when to_date('06.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d6,
  case when to_date('07.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d7,
  case when to_date('08.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d8,
  case when to_date('09.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d9,
  case when to_date('10.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d10,
  case when to_date('11.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d11,
  case when to_date('12.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d12,
  case when to_date('13.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d13,
  case when to_date('14.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d14,
  case when to_date('15.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d15,
  case when to_date('16.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d16,
  case when to_date('17.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d17,
  case when to_date('18.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d18,
  case when to_date('19.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d19,
  case when to_date('20.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d20,
  case when to_date('21.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d21,
  case when to_date('22.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d22,
  case when to_date('23.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d23,
  case when to_date('24.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d24,
  case when to_date('25.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d25,
  case when to_date('26.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d26,
  case when to_date('27.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d27,
  case when to_date('28.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d28,
  case when to_date('29.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d29,
  case when to_date('30.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d30,
  case when to_date('31.'||p.monthgen||'.'||p.yeargen, 'dd.MM.yyyy') between p.datestart and p.datefinal then 1 else 0 end as d31,
 ( select tks.name from tktechcard tk , tkclassificationtype tks
                  where tk.classificationtypecode = tks.code
                    and tk.code = eni.kartarefcode ) as name_classification,
                    p.formrefcode as formrefcode
, (select * from net.get_codemonthplan_byanycodeplan(p.code::numeric) ) as codemonthplan
from enplanwork p left join finexecutor f on p.finexecutorcode = f.code,
     enelementdata e
     left join enrecordpointprom rppr on rppr.elementcode=e.ecode
     left join enrecordpointbyt rpbyt on rpbyt.elementcode=e.ecode,
     enplanworktype pwt, enplanworkstate pws ,
     enplanworkitem eni
where
p.yeargen = $P{yearGen} and p.monthgen = $P{monthGen}
 and p.departmentrefcode = $P!{departmentCode}
 and p.elementrefcode = e.ecode
 and p.kindcode in (2,3,4) and p.statuscode not in (2,6)
-- and p.finexecutorcode is not null
-- and p.finexecutorcode = f.code

 and ( ( e.etype in (7,8) ) or (e.etype not in (7,8)
                                 and (p.typerefcode = 106
                                 and p.budgetrefcode = 240000001 )   ))    /*energozbyt или пит элемента не энергосбыт но работы были по установке Pre и бюджетодержатель - энергосбыт */

and p.staterefcode = pws.code
and p.typerefcode = pwt.code
and p.code = eni.planrefcode
and eni.countgen <> 0
-- and e.ecode in ( 90085261 , 90085441 )
) as q
) as q1 ) as qq, enelementdata ed, endepartment edn

where qq.elcode = ed.ecode and qq.department = edn.code
-- and ed.ecode = 90003634
 group by qq.finexecutorname, qq.planworktypename, qq.planworkstatename, qq.formrefcode , qq.elname,qq.rpaddress, edn.name, ed.invnumber, qq.cnn, qq.elcode, qq.fincode  , name_classification  , qq.codemonthplan --, p.kindcode, p.statuscode
) as qqq
-- order by qqq.fincode, qqq.finexecutorname, qqq.elname, qqq.planworktypename, qqq.planworkstatename, qqq.form
) sel_aa

group by planworktypename , planworkstatename  , name_classification  , finexecutorname, fincode
order by fincode , finexecutorname  , planworktypename , planworkstatename]]>
	</queryString>
	<field name="planworktypename" class="java.lang.String"/>
	<field name="planworkstatename" class="java.lang.String"/>
	<field name="name_classification" class="java.lang.String"/>
	<field name="finexecutorname" class="java.lang.String"/>
	<field name="fincode" class="java.lang.Integer"/>
	<field name="zaplanirovano" class="java.lang.Integer"/>
	<field name="vipolneno" class="java.lang.Integer"/>
	<field name="inwork" class="java.lang.Integer"/>
	<group name="gr_finexecutor">
		<groupExpression><![CDATA[$F{finexecutorname}]]></groupExpression>
		<groupHeader>
			<band height="15" splitType="Stretch">
				<printWhenExpression><![CDATA[new Boolean($F{fincode}.intValue() != 0 )]]></printWhenExpression>
				<textField pattern="" isBlankWhenNull="false">
					<reportElement key="textField-2" x="0" y="0" width="900" height="15" backcolor="#FFFFFF"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Arial" size="12" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{finexecutorname}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="20" splitType="Stretch">
				<printWhenExpression><![CDATA[new Boolean($F{fincode}.intValue() != 0 )]]></printWhenExpression>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="50" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false">
				<reportElement key="textField-1" x="0" y="0" width="774" height="20" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="14" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" план/факт на виконання робіт "]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="20" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-3" stretchType="RelativeToTallestObject" x="0" y="0" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="6" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Вид работ"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-4" stretchType="RelativeToTallestObject" x="40" y="0" width="35" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="7" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Тип акт"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-5" stretchType="RelativeToTallestObject" x="75" y="0" width="400" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Название группы работ"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-6" stretchType="RelativeToTallestObject" x="475" y="0" width="100" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Заплановано"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-7" stretchType="RelativeToTallestObject" x="575" y="0" width="100" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA["На стадії виконання"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-8" stretchType="RelativeToTallestObject" x="675" y="0" width="100" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Факт виконання"]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-9" stretchType="RelativeToTallestObject" x="0" y="0" width="40" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="6" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{planworktypename}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-10" stretchType="RelativeToTallestObject" x="40" y="0" width="35" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="7" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{planworkstatename}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-11" stretchType="RelativeToTallestObject" x="75" y="0" width="400" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{name_classification}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-12" stretchType="RelativeToTallestObject" x="475" y="0" width="100" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{zaplanirovano}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-13" stretchType="RelativeToTallestObject" x="575" y="0" width="100" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{inwork}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-14" stretchType="RelativeToTallestObject" x="675" y="0" width="100" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="8" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vipolneno}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
