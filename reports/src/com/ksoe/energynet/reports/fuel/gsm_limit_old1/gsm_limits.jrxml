<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="gsm_limits" pageWidth="1250" pageHeight="595" orientation="Landscape" whenNoDataType="BlankPage" columnWidth="1250" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isFloatColumnFooter="true" scriptletClass="com.ksoe.energynet.reports.common.FINScriptlet" isIgnorePagination="true">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="New Data Adapter 1"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<parameter name="pMonth" class="java.lang.Integer"/>
	<parameter name="pYear" class="java.lang.Integer"/>
	<parameter name="pDecade" class="java.lang.Integer"/>
	<parameter name="pFuelType" class="java.lang.Integer"/>
	<parameter name="pDateStart" class="java.lang.String"/>
	<parameter name="pDateFinal" class="java.lang.String"/>
	<parameter name="pFuelCodes" class="java.lang.String"/>
	<queryString>
		<![CDATA[select depname,
        round(pmm_count_on_start::numeric,2) as pmm_count_on_start,
        round(pmm_count_on_start_all::numeric,2) as  pmm_count_on_start_all,
        round(services_plan::numeric,2) as services_plan,
        round(services_fact::numeric,2) as services_fact,
        round(services_limit::numeric,2) as services_limit,
        round(current_repair_plan::numeric,2) as current_repair_plan,
        round(current_repair_fact::numeric,2) as current_repair_fact,
        round(capital_repair_plan::numeric,2) as capital_repair_plan,
        round(capital_repair_fact::numeric,2) as capital_repair_fact,
        round(maintenance_plan::numeric,2) as maintenance_plan,
        round(maintenance_fact::numeric,2) as maintenance_fact,
        round(sbyt_plan::numeric,2) as sbyt_plan,
        round(sbyt_fact::numeric,2) as sbyt_fact,
        round(other_plan::numeric,2) as other_plan,
        round(other_fact::numeric,2) as other_fact,
        round(maintenance_sbyt_repairs_and_other_limit::numeric,2) as maintenance_sbyt_repairs_and_other_limit,
        round(cap_build_ip_plan::numeric,2) as cap_build_ip_plan,
        round(cap_build_ip_fact::numeric,2) as cap_build_ip_fact,
        round(cap_builders_ip_limit::numeric,2) as cap_builders_ip_limit,
        round(cap_build_other_plan::numeric,2) as cap_build_other_plan,
        round(cap_build_other_fact::numeric,2) as cap_build_other_fact,
        round(cap_builders_other_limit::numeric,2) as cap_builders_other_limit,
        round(vrtu_plan::numeric,2) as vrtu_plan,
        round(vrtu_fact::numeric,2) as vrtu_fact,
        round(vrtu_limit::numeric,2) as vrtu_limit,
        round(avr_plan::numeric,2) as avr_plan,
        round(avr_fact::numeric,2) as avr_fact,
        round(avr_limit::numeric,2) as avr_limit,
        round(odg_plan::numeric,2) as odg_plan,
        round(odg_fact::numeric,2) as odg_fact,

        round((services_limit + maintenance_sbyt_repairs_and_other_limit + cap_builders_ip_limit +
        cap_builders_other_limit + vrtu_limit + avr_limit)::numeric,2) as all_limit,  decode,
        mol_codes,
        to_char(to_date($P{pDateStart},'dd.MM.yyyy'),'dd.MM.yyyy') as datestart,
        to_char(to_date($P{pDateFinal},'dd.MM.yyyy'),'dd.MM.yyyy') as datefinal,
        ord,
 case when  ord = -2  then 0
     else
        round((services_plan+current_repair_plan+capital_repair_plan+maintenance_plan+sbyt_plan+
        other_plan+cap_build_ip_plan+cap_build_other_plan+vrtu_plan+avr_plan+odg_plan)::numeric,2)
             end as all_plan


from (


select depname, ord, transport_department,  mol_codes,
case when ord not in (0,-3) then null else dep_4_limit end as decode,
sum(services_plan) as services_plan,	sum(services_fact) as services_fact,
        sum(current_repair_plan) as current_repair_plan,	sum(current_repair_fact) as current_repair_fact,
        sum(capital_repair_plan) as capital_repair_plan,	sum(capital_repair_fact) as capital_repair_fact,
        sum(maintenance_plan) as maintenance_plan,	sum(maintenance_fact) as maintenance_fact,
        sum(sbyt_plan) as sbyt_plan,	sum(sbyt_fact) as sbyt_fact,
        sum(other_plan) as other_plan,	sum(other_fact) as other_fact,
        sum(cap_build_ip_plan) as cap_build_ip_plan,	sum(cap_build_ip_fact) as cap_build_ip_fact,
        sum(cap_build_other_plan) as cap_build_other_plan,	sum(cap_build_other_fact) as cap_build_other_fact,
        sum(vrtu_plan) as vrtu_plan,	sum(vrtu_fact) as vrtu_fact,  sum(avr_plan) as avr_plan, sum(avr_fact) as avr_fact,
        sum(odg_plan) as odg_plan, sum(odg_fact) as odg_fact,


        (select sum(fsi.count1) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode = base_q.materialrefcode
        and fsi.departmentrefcode in (select array2items(string_to_array(base_q.dep_4_limit,','))::double precision)
        and fsi.decadenumber = base_q.decadenumber
        ) as services_limit ,

        (select sum(fsi.count2) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode = base_q.materialrefcode
        and fsi.departmentrefcode in (select array2items(string_to_array(base_q.dep_4_limit,','))::double precision)
        and fsi.decadenumber = base_q.decadenumber
        ) as maintenance_sbyt_repairs_and_other_limit,

        (select sum(fsi.count3) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode = base_q.materialrefcode
        and fsi.departmentrefcode in (select array2items(string_to_array(base_q.dep_4_limit,','))::double precision)
        and fsi.decadenumber = base_q.decadenumber
        ) as cap_builders_ip_limit,

        (select sum(fsi.count4) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode = base_q.materialrefcode
        and fsi.departmentrefcode in (select array2items(string_to_array(base_q.dep_4_limit,','))::double precision)
        and fsi.decadenumber = base_q.decadenumber
        ) as cap_builders_other_limit,

        (select sum(fsi.count5) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode = base_q.materialrefcode
        and fsi.departmentrefcode in (select array2items(string_to_array(base_q.dep_4_limit,','))::double precision)
        and fsi.decadenumber = base_q.decadenumber
        ) as vrtu_limit,

        (select sum(fsi.count6) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode = base_q.materialrefcode
        and fsi.departmentrefcode in (select array2items(string_to_array(base_q.dep_4_limit,','))::double precision)
        and fsi.decadenumber = base_q.decadenumber
        ) as avr_limit,

   case when ord in (0,-3) then
               round(coalesce((
              select sum(tsfr.countgenfinal) from
                  (select max(ts.datestart) as datestart, ts.transportrealcode
                  from
                  entravelsheet ts,
                  entravelsheetfuelremns fr
                  where
                  ts.code = fr.travelsheetrefcode
                  and ts.datestart < base_q.p_datestart
                  and ts.statusrefcode = 4
                  and ts.transportrealcode in (
                  ----
              select distinct t.transportrealcode
                  from
                    entransportitem t
              where
              t.planrefcode in (select pw.code from enplanwork pw, enworkorder2enplanwork pw2wo
              where pw.datestart between base_q.p_datestart and base_q.p_datefinal
              and pw.kindcode = 3
              and pw2wo.plancode = pw.code)
              and t.transportrealcode is not null
              and t.transportrealcode in
              (select tr.code from tktransportreal tr where  tr.transportdepartmntrfcd = base_q.transport_department )
                  ----
                  )
                  group by ts.transportrealcode ) as tr_max ,
              entravelsheet ts, entravelsheetfuelremns tsfr, tkfueltype ft
              where ts.datestart = tr_max.datestart
              and ts.transportrealcode = tr_max.transportrealcode
              and ts.code = tsfr.travelsheetrefcode
              and tsfr.fueltyperefcode = ft.code
              and ft.materialrefcode = base_q.materialrefcode
              and tsfr.countgenfinal > 0 ),0)::numeric,2)
else 0
end
as pmm_count_on_start, 0 as pmm_count_on_start_all

        from

(
select
case when transport_department = 10000 then
     case when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(70),','))::double precision)  then   'Апарат управління (СІЗПВ)'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(71),','))::double precision)  then   'Апарат управління (СДТУ)'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(73),','))::double precision)  then   'Апарат управління (СПС)'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(79),','))::double precision)  then   'Апарат управління (СРЗА)'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(91),','))::double precision)  then   'Апарат управління (СВЕМ)'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(481),','))::double precision)  then  'Апарат управління (ХМЕМ)' /*SUPP-29859*/
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(482),','))::double precision)  then  'Апарат управління (ХМВЕ)'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(675),','))::double precision)  then  'Апарат управління (РБС)'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(775),','))::double precision)  then  'Апарат управління (СКЕМ)'
     else 'Апарат управління (ІНШЕ)' end
else (select name from endepartment d where d.code = q.transport_department) end depname  ,

case when transport_department = 10000 then
     case when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(70),','))::double precision)  then   -2
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(71),','))::double precision)  then   -2
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(73),','))::double precision)  then   -2
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(79),','))::double precision)  then   -2
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(91),','))::double precision)  then   -2
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(481),','))::double precision)  then  -2 /*SUPP-29859*/
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(482),','))::double precision)  then  -2
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(675),','))::double precision)  then  -2
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(775),','))::double precision)  then  -2
     else -2 end
else 0 end ord ,

   case when q.staterefcode = 7 and q.typerefcode <> 2 and q.budgetrefcode not in (75000009, 75000011,500000040) then 'services'
        when q.staterefcode = 5 and q.typerefcode <> 2 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then 'current_repair'
        when q.staterefcode in (1,2) and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and q.typerefcode <> 2 then 'capital_repair'
        when q.staterefcode = 3 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and  q.typerefcode <> 2 then 'maintenance'
        when q.staterefcode <> 7 and q.typerefcode <> 2 and q.budgetrefcode = 240000001 then 'sbyt'
        when q.staterefcode not in (1, 3, 5, 7, 2) and q.typerefcode <> 2  and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then 'other'
        when q.typerefcode = 5 and q.budgetrefcode = 75000009 then 'cap_build_ip'
        when q.typerefcode not in (2, 5) and q.budgetrefcode = 75000009  then 'cap_build_other'
        when q.typerefcode <> 2 and q.budgetrefcode = 75000011 then 'vrtu'
        when q.typerefcode = 2  and q.budgetrefcode <> 500000040  then 'avr'
        when q.budgetrefcode = 500000040  then 'odg'
   else null
   end as report_column ,
        case when q.kindcode = 3 and q.staterefcode = 7 and q.typerefcode <> 2 and q.budgetrefcode not in (75000009, 75000011,500000040) then countfact else 0 end as services_plan,
        case when q.kindcode = 4 and q.staterefcode = 7 and q.typerefcode <> 2 and q.budgetrefcode not in (75000009, 75000011,500000040) then countfact else 0 end as services_fact,
        case when q.kindcode = 3 and q.staterefcode = 5 and q.typerefcode <> 2 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0  end as current_repair_plan,
        case when q.kindcode = 4 and q.staterefcode = 5 and q.typerefcode <> 2 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0 end as current_repair_fact,
        case when q.kindcode = 3 and q.staterefcode in (1,2) and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and q.typerefcode <> 2 then countfact else 0 end as capital_repair_plan,
        case when q.kindcode = 4 and q.staterefcode in (1,2) and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and q.typerefcode <> 2 then countfact else 0 end as capital_repair_fact,
        case when q.kindcode = 3 and q.staterefcode = 3 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and  q.typerefcode <> 2 then countfact else 0 end  as maintenance_plan,
        case when q.kindcode = 4 and q.staterefcode = 3 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and  q.typerefcode <> 2 then countfact else 0 end  as maintenance_fact,
        case when q.kindcode = 3 and q.staterefcode <> 7 and q.typerefcode <> 2 and q.budgetrefcode = 240000001 then countfact else 0 end  as sbyt_plan,
        case when q.kindcode = 4 and q.staterefcode <> 7 and q.typerefcode <> 2 and q.budgetrefcode = 240000001 then countfact else 0 end  as sbyt_fact,
        case when q.kindcode = 3 and q.staterefcode not in (1, 3, 5, 7, 2) and q.typerefcode <> 2  and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0 end as other_plan,
        case when q.kindcode = 4 and q.staterefcode not in (1, 3, 5, 7, 2) and q.typerefcode <> 2  and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0 end as other_fact,
        case when q.kindcode = 3 and q.typerefcode = 5 and q.budgetrefcode = 75000009 then countfact else 0 end as cap_build_ip_plan,
        case when q.kindcode = 4 and q.typerefcode = 5 and q.budgetrefcode = 75000009 then countfact else 0 end as cap_build_ip_fact,
        case when q.kindcode = 3 and q.typerefcode not in (2, 5) and q.budgetrefcode = 75000009  then countfact else 0 end as cap_build_other_plan,
        case when q.kindcode = 4 and q.typerefcode not in (2, 5) and q.budgetrefcode = 75000009  then countfact else 0 end as cap_build_other_fact,
        case when q.kindcode = 3 and q.typerefcode <> 2 and q.budgetrefcode = 75000011 then countfact else 0 end as vrtu_plan,
        case when q.kindcode = 4 and q.typerefcode <> 2 and q.budgetrefcode = 75000011 then countfact else 0 end as vrtu_fact,
        case when q.kindcode = 3 and q.typerefcode = 2  and q.budgetrefcode <> 500000040  then countfact else 0 end as avr_plan,
        case when q.kindcode = 4 and q.typerefcode = 2  and q.budgetrefcode <> 500000040  then countfact else 0 end as avr_fact,
        case when q.kindcode = 3 and q.budgetrefcode = 500000040  then countfact else 0 end as odg_plan,
        case when q.kindcode = 4 and q.budgetrefcode = 500000040  then countfact else 0 end as odg_fact,

        transport_department,

        case when transport_department = 10000 then
        case when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(70),','))::double precision)  then   '70'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(71),','))::double precision)  then   '71'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(73),','))::double precision)  then   '73'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(79),','))::double precision)  then   '79'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(91),','))::double precision)  then   '91'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(481),','))::double precision)  then  '481'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(482),','))::double precision)  then  '482'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(675),','))::double precision)  then  '675'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown(775),','))::double precision)  then  '775'
          when departmentrefcode in (select array2items(string_to_array(getdepartmentcodesdown4pmm(3),','))::double precision)  then  '3'
          when departmentrefcode = 500000019 then '3'
          else '3'
          end
          else '' || transport_department || ''  end as dep_4_limit,
          p_year, p_month, decadenumber ,
          case materialrefcode
          when 500002447 then 500000120
          else materialrefcode end
          as materialrefcode,
          p_datestart, p_datefinal,
           ( select string_agg(s.molkod,',') from enspravmol s
   where s.departmentcode in
  (select d.departmentcode from entransportdep2dep d where d.transportdepartmentcod = q.transport_department)  ) as mol_codes

 from

(select  pw.code as plan_code,
case when ei.kindrefcode = 1 and pw.kindcode = 4 then
(select sum(quantity) from finmaterials f where f.estimateitemrefcode = ei.code and f.statusrefcode = 1)
else ei.countfact end as countfact,
pw.kindcode as kindcode,
        pw.staterefcode as staterefcode, pw.typerefcode as typerefcode, pw.budgetrefcode as budgetrefcode, ei.materialrefcode,
  case when ei.kindrefcode = 2 then
  (
  select treal.transportdepartmntrfcd
     from tktransportreal treal
    where treal.code = t.transportrealcode
  )
  else
  (
    select tdep.transportdepartmentcod
     from entransportdep2dep tdep
    where tdep.departmentcode = pw.departmentrefcode
  ) end
    as transport_department,
    pw.departmentrefcode ,
   $P{pYear} as p_year, $P{pMonth} as p_month, $P{pDecade} as decadenumber,
    to_date($P{pDateStart},'dd.MM.yyyy') as p_datestart,
    to_date($P{pDateFinal},'dd.MM.yyyy') as p_datefinal

from enplanwork pw,  enworkorder2enplanwork wo2pw,
     enestimateitem ei left join entransport2enestimate t2e on (ei.code = t2e.estimaterefcode)
                       left join entransportitem t on (t2e.transportrefcode = t.code)
                       left join entravlshttm2trnsprttm t2t on (t2t.transportitemrefcode = t.code)
                       left join enplanworkitem on (ei.planitemrefcode = enplanworkitem.code  )
where pw.code = ei.planrefcode
  and pw.datestart between  to_date($P{pDateStart},'dd.MM.yyyy') and to_date($P{pDateFinal},'dd.MM.yyyy')
  and pw.kindcode in (3,4)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in (select array2items(string_to_array($P{pFuelCodes},','))::double precision)
  and ei.countfact > 0
  and ((ei.kindrefcode = 1  and enplanworkitem.countgen > 0) or
  (ei.kindrefcode = 2 and t.transportrealcode is not null and t2t.code is not null and pw.kindcode = 4)
  or
  (ei.kindrefcode = 2 and t.transportrealcode is not null and pw.kindcode = 3 and enplanworkitem.countgen > 0) )

) as q

UNION ALL

select
    'Апарат управління (Загалом)' as depname , -3 as ord,

   case when q.staterefcode = 7 and q.typerefcode <> 2 and q.budgetrefcode not in (75000009, 75000011,500000040) then 'services'
        when q.staterefcode = 5 and q.typerefcode <> 2 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then 'current_repair'
        when q.staterefcode in (1,2) and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and q.typerefcode <> 2 then 'capital_repair'
        when q.staterefcode = 3 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and  q.typerefcode <> 2 then 'maintenance'
        when q.staterefcode <> 7 and q.typerefcode <> 2 and q.budgetrefcode = 240000001 then 'sbyt'
        when q.staterefcode not in (1, 3, 5, 7, 2) and q.typerefcode <> 2  and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then 'other'
        when q.typerefcode = 5 and q.budgetrefcode = 75000009 then 'cap_build_ip'
        when q.typerefcode not in (2, 5) and q.budgetrefcode = 75000009  then 'cap_build_other'
        when q.typerefcode <> 2 and q.budgetrefcode = 75000011 then 'vrtu'
        when q.typerefcode = 2  and q.budgetrefcode <> 500000040  then 'avr'
        when q.budgetrefcode = 500000040  then 'odg'
   else null
   end as report_column ,
        case when q.kindcode = 3 and q.staterefcode = 7 and q.typerefcode <> 2 and q.budgetrefcode not in (75000009, 75000011,500000040) then countfact else 0 end as services_plan,
        case when q.kindcode = 4 and q.staterefcode = 7 and q.typerefcode <> 2 and q.budgetrefcode not in (75000009, 75000011,500000040) then countfact else 0 end as services_fact,
        case when q.kindcode = 3 and q.staterefcode = 5 and q.typerefcode <> 2 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0  end as current_repair_plan,
        case when q.kindcode = 4 and q.staterefcode = 5 and q.typerefcode <> 2 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0 end as current_repair_fact,
        case when q.kindcode = 3 and q.staterefcode in (1,2) and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and q.typerefcode <> 2 then countfact else 0 end as capital_repair_plan,
        case when q.kindcode = 4 and q.staterefcode in (1,2) and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and q.typerefcode <> 2 then countfact else 0 end as capital_repair_fact,
        case when q.kindcode = 3 and q.staterefcode = 3 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and  q.typerefcode <> 2 then countfact else 0 end  as maintenance_plan,
        case when q.kindcode = 4 and q.staterefcode = 3 and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) and  q.typerefcode <> 2 then countfact else 0 end  as maintenance_fact,
        case when q.kindcode = 3 and q.staterefcode <> 7 and q.typerefcode <> 2 and q.budgetrefcode = 240000001 then countfact else 0 end  as sbyt_plan,
        case when q.kindcode = 4 and q.staterefcode <> 7 and q.typerefcode <> 2 and q.budgetrefcode = 240000001 then countfact else 0 end  as sbyt_fact,
        case when q.kindcode = 3 and q.staterefcode not in (1, 3, 5, 7, 2) and q.typerefcode <> 2  and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0 end as other_plan,
        case when q.kindcode = 4 and q.staterefcode not in (1, 3, 5, 7, 2) and q.typerefcode <> 2  and q.budgetrefcode not in (240000001, 75000009, 75000011,500000040) then countfact else 0 end as other_fact,
        case when q.kindcode = 3 and q.typerefcode = 5 and q.budgetrefcode = 75000009 then countfact else 0 end as cap_build_ip_plan,
        case when q.kindcode = 4 and q.typerefcode = 5 and q.budgetrefcode = 75000009 then countfact else 0 end as cap_build_ip_fact,
        case when q.kindcode = 3 and q.typerefcode not in (2, 5) and q.budgetrefcode = 75000009  then countfact else 0 end as cap_build_other_plan,
        case when q.kindcode = 4 and q.typerefcode not in (2, 5) and q.budgetrefcode = 75000009  then countfact else 0 end as cap_build_other_fact,
        case when q.kindcode = 3 and q.typerefcode <> 2 and q.budgetrefcode = 75000011 then countfact else 0 end as vrtu_plan,
        case when q.kindcode = 4 and q.typerefcode <> 2 and q.budgetrefcode = 75000011 then countfact else 0 end as vrtu_fact,
        case when q.kindcode = 3 and q.typerefcode = 2  and q.budgetrefcode <> 500000040  then countfact else 0 end as avr_plan,
        case when q.kindcode = 4 and q.typerefcode = 2  and q.budgetrefcode <> 500000040  then countfact else 0 end as avr_fact,
        case when q.kindcode = 3 and q.budgetrefcode = 500000040  then countfact else 0 end as odg_plan,
        case when q.kindcode = 4 and q.budgetrefcode = 500000040  then countfact else 0 end as odg_fact,
        transport_department,
         '3,70, 71, 73, 79, 91, 481, 482, 675, 775' as dep_4_limit,
         p_year, p_month, decadenumber ,
          case materialrefcode
          when 500002447 then 500000120
          else materialrefcode end
          as materialrefcode,
         p_datestart, p_datefinal,
         ( select string_agg(s.molkod,',') from enspravmol s
   where s.departmentcode in
  (select d.departmentcode from entransportdep2dep d where d.transportdepartmentcod = q.transport_department)  ) as mol_codes
 from

(select pw.code as plan_code,

case when ei.kindrefcode = 1 and pw.kindcode = 4 then
(select sum(quantity) from finmaterials f where f.estimateitemrefcode = ei.code and f.statusrefcode = 1)
else ei.countfact end as countfact,

 pw.kindcode as kindcode,
        pw.staterefcode as staterefcode, pw.typerefcode as typerefcode, pw.budgetrefcode as budgetrefcode, ei.materialrefcode,
  case when ei.kindrefcode = 2 then
  (
  select treal.transportdepartmntrfcd
     from tktransportreal treal
    where treal.code = t.transportrealcode
  )
  else
  (
    select tdep.transportdepartmentcod
     from entransportdep2dep tdep
    where tdep.departmentcode = pw.departmentrefcode
  ) end
    as transport_department,
    pw.departmentrefcode ,
   $P{pYear} as p_year, $P{pMonth} as p_month, $P{pDecade} as decadenumber,
   to_date($P{pDateStart},'dd.MM.yyyy') as p_datestart,
   to_date($P{pDateFinal},'dd.MM.yyyy') as p_datefinal

from enplanwork pw,  enworkorder2enplanwork wo2pw,
     enestimateitem ei left join entransport2enestimate t2e on (ei.code = t2e.estimaterefcode)
                       left join entransportitem t on (t2e.transportrefcode = t.code)
                       left join entravlshttm2trnsprttm t2t on (t2t.transportitemrefcode = t.code)
                       left join enplanworkitem on (ei.planitemrefcode = enplanworkitem.code  )
where pw.code = ei.planrefcode
  and pw.datestart between  to_date($P{pDateStart},'dd.MM.yyyy') and to_date($P{pDateFinal},'dd.MM.yyyy')
  and pw.kindcode in (3,4)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in (select array2items(string_to_array($P{pFuelCodes},','))::double precision)
  and ei.countfact > 0
  and ((ei.kindrefcode = 1  and enplanworkitem.countgen > 0) or
  (ei.kindrefcode = 2 and t.transportrealcode is not null and t2t.code is not null and pw.kindcode = 4)
  or
  (ei.kindrefcode = 2 and t.transportrealcode is not null and pw.kindcode = 3 and enplanworkitem.countgen > 0) )

) as q
where transport_department = 10000

) as base_q

group by  depname, ord, transport_department, dep_4_limit, p_datestart, p_datefinal,
          p_year, p_month, decadenumber , materialrefcode, mol_codes
order by ord, depname, transport_department

) as q_p]]>
	</queryString>
	<field name="depname" class="java.lang.String">
		<fieldDescription><![CDATA[Підрозділ (ФК)]]></fieldDescription>
	</field>
	<field name="pmm_count_on_start" class="java.math.BigDecimal"/>
	<field name="pmm_count_on_start_all" class="java.math.BigDecimal"/>
	<field name="services_plan" class="java.math.BigDecimal"/>
	<field name="services_fact" class="java.math.BigDecimal"/>
	<field name="services_limit" class="java.math.BigDecimal"/>
	<field name="current_repair_plan" class="java.math.BigDecimal"/>
	<field name="current_repair_fact" class="java.math.BigDecimal"/>
	<field name="capital_repair_plan" class="java.math.BigDecimal"/>
	<field name="capital_repair_fact" class="java.math.BigDecimal"/>
	<field name="maintenance_plan" class="java.math.BigDecimal"/>
	<field name="maintenance_fact" class="java.math.BigDecimal"/>
	<field name="sbyt_plan" class="java.math.BigDecimal"/>
	<field name="sbyt_fact" class="java.math.BigDecimal"/>
	<field name="other_plan" class="java.math.BigDecimal"/>
	<field name="other_fact" class="java.math.BigDecimal"/>
	<field name="maintenance_sbyt_repairs_and_other_limit" class="java.math.BigDecimal"/>
	<field name="cap_build_ip_plan" class="java.math.BigDecimal"/>
	<field name="cap_build_ip_fact" class="java.math.BigDecimal"/>
	<field name="cap_builders_ip_limit" class="java.math.BigDecimal"/>
	<field name="cap_build_other_plan" class="java.math.BigDecimal"/>
	<field name="cap_build_other_fact" class="java.math.BigDecimal"/>
	<field name="cap_builders_other_limit" class="java.math.BigDecimal"/>
	<field name="vrtu_plan" class="java.math.BigDecimal"/>
	<field name="vrtu_fact" class="java.math.BigDecimal"/>
	<field name="vrtu_limit" class="java.math.BigDecimal"/>
	<field name="avr_plan" class="java.math.BigDecimal"/>
	<field name="avr_fact" class="java.math.BigDecimal"/>
	<field name="avr_limit" class="java.math.BigDecimal"/>
	<field name="odg_plan" class="java.math.BigDecimal"/>
	<field name="odg_fact" class="java.math.BigDecimal"/>
	<field name="all_limit" class="java.math.BigDecimal"/>
	<field name="decode" class="java.lang.String"/>
	<field name="mol_codes" class="java.lang.String"/>
	<field name="datestart" class="java.lang.String"/>
	<field name="datefinal" class="java.lang.String"/>
	<field name="ord" class="java.lang.Integer"/>
	<field name="all_plan" class="java.math.BigDecimal"/>
	<variable name="services_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{services_plan}]]></variableExpression>
	</variable>
	<variable name="services_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{services_fact}]]></variableExpression>
	</variable>
	<variable name="services_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{services_limit}]]></variableExpression>
	</variable>
	<variable name="current_repair_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{current_repair_plan}]]></variableExpression>
	</variable>
	<variable name="current_repair_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{current_repair_fact}]]></variableExpression>
	</variable>
	<variable name="capital_repair_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{capital_repair_plan}]]></variableExpression>
	</variable>
	<variable name="capital_repair_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{capital_repair_fact}]]></variableExpression>
	</variable>
	<variable name="maintenance_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{maintenance_plan}]]></variableExpression>
	</variable>
	<variable name="maintenance_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{maintenance_fact}]]></variableExpression>
	</variable>
	<variable name="sbyt_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{sbyt_plan}]]></variableExpression>
	</variable>
	<variable name="sbyt_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{sbyt_fact}]]></variableExpression>
	</variable>
	<variable name="other_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{other_plan}]]></variableExpression>
	</variable>
	<variable name="other_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{other_fact}]]></variableExpression>
	</variable>
	<variable name="maintenance_sbyt_repairs_and_other_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{maintenance_sbyt_repairs_and_other_limit}]]></variableExpression>
	</variable>
	<variable name="cap_build_ip_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_ip_plan}]]></variableExpression>
	</variable>
	<variable name="cap_build_ip_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_ip_fact}]]></variableExpression>
	</variable>
	<variable name="cap_builders_ip_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_builders_ip_limit}]]></variableExpression>
	</variable>
	<variable name="cap_build_other_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_other_plan}]]></variableExpression>
	</variable>
	<variable name="cap_build_other_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_other_fact}]]></variableExpression>
	</variable>
	<variable name="cap_builders_other_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_builders_other_limit}]]></variableExpression>
	</variable>
	<variable name="vrtu_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{vrtu_plan}]]></variableExpression>
	</variable>
	<variable name="vrtu_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{vrtu_fact}]]></variableExpression>
	</variable>
	<variable name="vrtu_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{vrtu_limit}]]></variableExpression>
	</variable>
	<variable name="all_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{all_limit}]]></variableExpression>
	</variable>
	<variable name="result1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{vidacha}]]></variableExpression>
	</variable>
	<variable name="rest_from_fk" class="java.math.BigDecimal">
		<variableExpression><![CDATA[((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getFuelRestByMOLAndTypeOnDate($F{decode}, $P{pFuelType}, $F{datestart}, 0)]]></variableExpression>
	</variable>
	<variable name="avr_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{avr_plan}]]></variableExpression>
	</variable>
	<variable name="avr_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{avr_limit}]]></variableExpression>
	</variable>
	<variable name="avr_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{avr_fact}]]></variableExpression>
	</variable>
	<variable name="rest_from_fk_avz" class="java.math.BigDecimal">
		<variableExpression><![CDATA[((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getFuelRestAVZByMOLAndTypeOnDate($F{decode}, $P{pFuelType},  $F{datestart})]]></variableExpression>
	</variable>
	<variable name="pmm_count_on_start_avz1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{rest_from_fk_avz}]]></variableExpression>
	</variable>
	<variable name="vidacha" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk})).doubleValue() < 0 ? new BigDecimal(0) :
$F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}))

/* при выдаче топлива на путевых оно переходит в назначение БАКИ. поэтому остатки фин берем все что не  резерв и не баки и сумируем остатки в баках по машинам которые используются в декаде $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))).doubleValue() < 0 ? new BigDecimal(0) :
$F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))) */]]></variableExpression>
	</variable>
	<variable name="rest_all_start" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{pmm_count_on_start}.add($V{rest_from_fk})
/* при выдаче топлива на путевых оно переходит в назначение БАКИ. поэтому остатки фин берем все что не  резерв и не баки и сумируем остатки в баках по машинам которые используются в декаде  $F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))*/]]></variableExpression>
	</variable>
	<variable name="pmm_count_on_start1" class="java.math.BigDecimal" resetType="Column" calculation="Sum">
		<variableExpression><![CDATA[$V{rest_all_start}]]></variableExpression>
		<initialValueExpression><![CDATA[$V{rest_all_start}]]></initialValueExpression>
	</variable>
	<variable name="odg_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{odg_plan}]]></variableExpression>
	</variable>
	<variable name="odg_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{odg_fact}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="30">
			<textField>
				<reportElement positionType="Float" x="0" y="0" width="150" height="30"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{depname}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="250" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{services_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="250" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{services_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="300" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{services_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="350" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{current_repair_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="350" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{current_repair_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="400" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{capital_repair_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="400" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{capital_repair_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="450" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{maintenance_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="450" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{maintenance_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="500" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sbyt_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="500" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sbyt_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="600" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{other_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="600" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{other_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="650" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{maintenance_sbyt_repairs_and_other_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="700" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_ip_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="700" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_ip_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="750" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_builders_ip_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="800" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_other_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="800" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_other_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="850" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_builders_other_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="900" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vrtu_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="900" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vrtu_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="950" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vrtu_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1100" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{all_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1150" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vidacha}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="150" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{rest_all_start}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="1000" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avr_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="1000" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avr_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1050" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avr_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="200" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{rest_from_fk_avz}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1200" y="0" width="50" height="30" backcolor="#66FFCC"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{all_limit}.subtract(
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk})).doubleValue() < 0 ? new BigDecimal(0) :
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}))
)


/*при выдаче топлива на путевых оно переходит в назначение БАКИ. поэтому остатки фин берем все что не  резерв и не баки и сумируем остатки в баках по машинам которые используются в декаде $F{all_limit}.subtract(
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))).doubleValue() < 0 ? new BigDecimal(0) :
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all})))
)*/

/*$F{all_limit}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))).doubleValue() < 0 ? new BigDecimal(0) :
$F{all_limit}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all})))*/]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="550" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{odg_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="550" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{odg_plan}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="30">
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="150" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{pmm_count_on_start1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="250" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{services_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="250" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{services_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="300" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{services_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="350" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{current_repair_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="350" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{current_repair_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="400" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{capital_repair_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="400" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{capital_repair_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="450" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{maintenance_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="450" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{maintenance_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="500" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sbyt_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="500" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sbyt_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="600" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{other_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="600" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{other_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="650" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{maintenance_sbyt_repairs_and_other_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="700" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_ip_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="700" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_ip_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="750" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_builders_ip_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="800" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_other_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="800" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_other_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="850" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_builders_other_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="900" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vrtu_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="900" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vrtu_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="950" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vrtu_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1100" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{all_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1150" y="0" width="50" height="30" isPrintWhenDetailOverflows="true" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{result1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" mode="Opaque" x="0" y="0" width="150" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Всього по декаді " + $P{pDecade} + ":"]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1050" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{avr_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1000" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{avr_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1000" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{avr_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="200" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{pmm_count_on_start_avz1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00" isBlankWhenNull="true">
				<reportElement positionType="Float" mode="Opaque" x="1200" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="550" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{odg_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="550" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{odg_plan1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
