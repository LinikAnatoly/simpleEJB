<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="gsm_limits" pageWidth="1250" pageHeight="595" orientation="Landscape" whenNoDataType="BlankPage" columnWidth="1250" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isFloatColumnFooter="true" scriptletClass="com.ksoe.energynet.reports.common.FINScriptlet" isIgnorePagination="true">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="New Data Adapter 1"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="400"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<parameter name="pMonth" class="java.lang.Integer"/>
	<parameter name="pYear" class="java.lang.Integer"/>
	<parameter name="pDecade" class="java.lang.Integer"/>
	<parameter name="pFuelType" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select depname,
    	podr_code,	pmm_count_on_start,         pmm_count_on_start_all ,
        services_plan,	services_fact, services_limit,
        current_repair_plan,	current_repair_fact,
        capital_repair_plan,	capital_repair_fact,
        maintenance_plan,	maintenance_fact,
        sbyt_plan,	sbyt_fact,
        other_plan,	other_fact, maintenance_sbyt_repairs_and_other_limit,
        cap_build_ip_plan,	cap_build_ip_fact, cap_builders_ip_limit,
        cap_build_other_plan,	cap_build_other_fact, cap_builders_other_limit,
        vrtu_plan,	vrtu_fact, vrtu_limit, avr_plan, avr_fact, avr_limit,
        all_limit,  decode,
        mol_codes,
        to_char(datestart,'dd.MM.yyyy') as datestart,
        to_char(datefinal,'dd.MM.yyyy') as datefinal,
        ord,
 case when podr_code in ( 79 ,73,70,71,91,775,675,482 ) or (podr_code = 3 and ord = -1  ) then 0
      when podr_code = 481 then hmem_plan
     else
           services_plan+current_repair_plan+capital_repair_plan+maintenance_plan+sbyt_plan+other_plan+cap_build_ip_plan+cap_build_other_plan+vrtu_plan+avr_plan+odg_plan
             end as all_plan
 , odg_plan, odg_fact
        from
(
select case when (base_q.ord in (-1,0)) then '0' else
 base_q.decode end as decode, base_q.depname, base_q.podr_code, base_q.mol_codes,
base_q.datestart, base_q.datefinal, base_q.ord,

--- ХМЕМ + ХМВЕ - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and ei.kindrefcode = 2
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode_for_hmem),','))::double precision)

  union all

   select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and ei.kindrefcode = 1
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode_for_hmem),','))::double precision)
  ) as q
  ),0)::numeric,2) as hmem_plan,

--- Услуги - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 7
  and pw.typerefcode <> 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and ei.kindrefcode = 2
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and pw.budgetrefcode not in (75000009, 75000011,500000040)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)

  union all

   select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 7
  and pw.typerefcode <> 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and ei.kindrefcode = 1
  and pw.budgetrefcode not in (75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as services_plan,

--- Услуги - факт
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 7
  and pw.typerefcode <> 2
  and pw.kindcode = 4
  and ei.kindrefcode = 2
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and pw.budgetrefcode not in (75000009, 75000011,500000040)
   and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)

  union all

  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 7
  and pw.typerefcode <> 2
  and pw.kindcode = 4
  and ei.kindrefcode = 1
  and pw.budgetrefcode not in (75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as services_fact,

--- Текущий ремонт - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 5
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode in
 (select array2items(string_to_array((base_q.decode),','))::double precision)
 union all
 select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 5
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
 ),0)::numeric,2) as current_repair_plan,

 --- Текущий ремонт - факт
 round(coalesce((
 select sum(countfact) from
 (select  ei.countfact
from enplanwork pw, enestimateitem ei,
  entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 5
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 4
   and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode in
 (select array2items(string_to_array((base_q.decode),','))::double precision)
union all
 select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
and pw.staterefcode = 5
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
 ) as q
 ),0)::numeric,2) as current_repair_fact,


   --- Капитальный ремонт - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal

  and pw.staterefcode in (1,2 /*SUPP-25730 1 часть*/)
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and ei.kindrefcode = 2
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
   and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode in
 (select array2items(string_to_array((base_q.decode),','))::double precision)
 union all
 select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode in (1,2 /*SUPP-25730 1 часть*/)
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
 ),0)::numeric,2) as capital_repair_plan,

   --- Капитальный ремонт - факт
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
  entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode in (1,2 /*SUPP-25730 1 часть*/)
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 4
   and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode in
 (select array2items(string_to_array((base_q.decode),','))::double precision)
 union all
 select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode in (1,2 /*SUPP-25730 1 часть*/)
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
 ),0)::numeric,2) as capital_repair_fact,

--- ТО - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 3
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 3
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as maintenance_plan,

-- ТО - факт
  round(coalesce((
  select sum(countfact) from
  (select ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 3
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 4
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode = 3
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q

  ),0)::numeric,2) as maintenance_fact,


--- Энергосбыт - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and  pw.staterefcode <> 7
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 240000001
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
   and pw.staterefcode <> 7
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and pw.budgetrefcode = 240000001
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as sbyt_plan,

-- Энергосбыт - факт
  round(coalesce((
  select sum(countfact) from
  (select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode <> 7
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 4
  and pw.budgetrefcode = 240000001
   and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
   and pw.staterefcode <> 7
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  and pw.budgetrefcode = 240000001
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q

  ),0)::numeric,2) as sbyt_fact,


--- Прочее - план
round(coalesce((select  sum(q.countfact)  from (
select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode not in (1, 3, 5, 7, 2/*SUPP-25730 1 часть*/)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode not in (1, 3, 5, 7, 2/*SUPP-25730 1 часть*/)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as other_plan,

-- Прочее - факт
round(coalesce((select  sum(q.countfact)  from (
select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti,
     enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.staterefcode not in (1, 3, 5, 7 , 2/*SUPP-25730 1 часть*/)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 2
  and pw.kindcode = 4
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
    and pw.staterefcode not in (1, 3, 5, 7 , 2/*SUPP-25730 1 часть*/)
  and pw.typerefcode <> 2
  and ei.kindrefcode = 1
  and pw.kindcode = 1
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode not in (240000001, 75000009, 75000011,500000040)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)

  ) as q
  ),0)::numeric,2) as other_fact,


--- ИП ВКБ - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 5
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 75000009
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)

  union all

  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 5
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 75000009
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as cap_build_ip_plan,

-- ИП ВКБ - факт
  round(coalesce((
  select sum(countfact) from
  (select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 5
  and ei.kindrefcode = 2
  and pw.kindcode = 4
  and pw.budgetrefcode = 75000009
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)

  union all

  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 5
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  and pw.budgetrefcode = 75000009
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as cap_build_ip_fact,


--- прочее ВКБ - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode not in (2, 5)
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 75000009
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)

  union all

  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
 and pw.typerefcode not in (2, 5)
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 75000009
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as cap_build_other_plan,

-- прочее ВКБ - факт
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode not in (2, 5)
  and ei.kindrefcode = 2
  and pw.kindcode = 4
  and pw.budgetrefcode = 75000009
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)

  union all

  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
 and pw.typerefcode not in (2, 5)
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  and pw.budgetrefcode = 75000009
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as cap_build_other_fact,

--- ВРТУВД - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and ei.kindrefcode = 2
  and pw.typerefcode <> 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 75000011
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and ei.kindrefcode = 1
  and pw.typerefcode <> 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 75000011
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as vrtu_plan,

-- ВРТУВД - факт
  round(coalesce((
  select  sum(q.countfact)  from (
  select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and ei.kindrefcode = 2
  and pw.typerefcode <> 2
  and pw.kindcode = 4
  and pw.budgetrefcode = 75000011
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
   and ei.kindrefcode = 1
  and pw.typerefcode <> 2
  and pw.kindcode = 4
  and pw.budgetrefcode = 75000011
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as vrtu_fact,

  --- авр - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 2
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and wo2pw.plancode = pw.code
  --and pw.budgetrefcode not in (240000001, 75000009, 75000011)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 2
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  --and pw.budgetrefcode not in (240000001, 75000009, 75000011)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as avr_plan,

-- авр - факт
  round(coalesce((
  select sum(countfact) from
  (select ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 2
  and ei.kindrefcode = 2
  and pw.kindcode = 4
  --and pw.budgetrefcode not in (240000001, 75000009, 75000011)
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and pw.typerefcode = 2
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  --and pw.budgetrefcode not in (240000001, 75000009, 75000011)
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q

  ),0)::numeric,2) as avr_fact ,

  ---
  --- одг - план
round(coalesce((
select sum(countfact) from
(select  ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and ei.kindrefcode = 2
  and pw.kindcode = 3
  and pw.typerefcode <> 2
  and wo2pw.plancode = pw.code
  and pw.budgetrefcode = 500000040
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  ei.countfact
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and ei.kindrefcode = 1
  and pw.kindcode = 3
  and pw.typerefcode <> 2
  and pw.budgetrefcode = 500000040
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q
  ),0)::numeric,2) as odg_plan,

-- авр - факт
  round(coalesce((
  select sum(countfact) from
  (select ei.countfact
from enplanwork pw, enestimateitem ei,
     entransport2enestimate t2e, entransportitem t,
     entravelsheetitem tsi, entravlshttm2trnsprttm tsi2ti
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and ei.kindrefcode = 2
  and pw.kindcode = 4
  and pw.typerefcode <> 2
  and pw.budgetrefcode = 500000040
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and ei.code = t2e.estimaterefcode
  and t2e.transportrefcode = t.code
  and t.transportrealcode is not null
  and tsi.code = tsi2ti.travelsheetitemrefcode
  and t.code = tsi2ti.transportitemrefcode
  and tsi.kindrefcode = 2
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  union all
  select  fin.quantity
from enplanwork pw, enestimateitem ei,
          enworkorder2enplanwork wo2pw, finmaterials fin
where pw.code = ei.planrefcode
  and pw.datestart between base_q.datestart and base_q.datefinal
  and ei.kindrefcode = 1
  and pw.kindcode = 4
  and pw.typerefcode <> 2
  and pw.budgetrefcode = 500000040
  and wo2pw.plancode = pw.code
  and ei.materialrefcode in
  (select array2items(string_to_array((base_q.materialcode),','))::double precision)
  and fin.estimateitemrefcode = ei.code
  and fin.statusrefcode = 1
  and ei.countfact > 0
  and pw.departmentrefcode  in
  (select array2items(string_to_array((base_q.decode),','))::double precision)
  ) as q

  ),0)::numeric,2) as odg_fact ,
  ---


(select sum(fsi.count1) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode in
        (select array2items(string_to_array((base_q.materialcode),','))::double precision)
        and fsi.departmentrefcode in
        (select array2items(string_to_array((base_q.podr_for_limit),','))::double precision)
        and fsi.decadenumber = base_q.decadenumber) as services_limit,

        (select sum(fsi.count2) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode in
        (select array2items(string_to_array((base_q.materialcode),','))::double precision)
        and fsi.departmentrefcode in
        (select array2items(string_to_array((base_q.podr_for_limit),','))::double precision)
        and fsi.decadenumber = base_q.decadenumber) as maintenance_sbyt_repairs_and_other_limit,

        (select sum(fsi.count3) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode in
        (select array2items(string_to_array((base_q.materialcode),','))::double precision)
         and fsi.departmentrefcode in
        (select array2items(string_to_array((base_q.podr_for_limit),','))::double precision)
        and fsi.decadenumber = base_q.decadenumber) as cap_builders_IP_limit,

        (select sum(fsi.count4) from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode in
        (select array2items(string_to_array((base_q.materialcode),','))::double precision)
       and fsi.departmentrefcode in
        (select array2items(string_to_array((base_q.podr_for_limit),','))::double precision)
        and fsi.decadenumber = base_q.decadenumber) as cap_builders_other_limit,

       (select sum(fsi.count5)  from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode in
        (select array2items(string_to_array((base_q.materialcode),','))::double precision)
       and fsi.departmentrefcode in
        (select array2items(string_to_array((base_q.podr_for_limit),','))::double precision)
        and fsi.decadenumber = base_q.decadenumber) as vrtu_limit,

         (select sum(fsi.count6)  from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode in
        (select array2items(string_to_array((base_q.materialcode),','))::double precision)
        and fsi.departmentrefcode in
        (select array2items(string_to_array((base_q.podr_for_limit),','))::double precision)
        and fsi.decadenumber = base_q.decadenumber) as avr_limit,

 round(coalesce((
select sum(tsfr.countgenfinal) from
      (select max(ts.datestart) as datestart, ts.transportrealcode
      from
      entravelsheet ts,
      entravelsheetfuelremns fr
      where
      ts.code = fr.travelsheetrefcode
      and ts.datestart < base_q.datestart
      /*and ts.statusrefcode = 4 остатки на путевых учитываются все . что бы учитывались выдачи */
      and ts.transportrealcode in (
      ----
      select  t.transportrealcode
          from enplanwork pw, enestimateitem ei,
               entransport2enestimate t2e, entransportitem t,
               enworkorder2enplanwork wo2pw, tktransportreal r
          where pw.code = ei.planrefcode
            and pw.datestart between base_q.datestart and base_q.datefinal
            and pw.kindcode = 3
            and wo2pw.plancode = pw.code
            and ei.kindrefcode = 2
            and ei.code = t2e.estimaterefcode
            and t2e.transportrefcode = t.code
            and t.transportrealcode is not null
            and ei.materialrefcode in
            (select array2items(string_to_array((base_q.materialcode),','))::double precision)
            and ei.countfact > 0
            and pw.departmentrefcode  in
            (select array2items(string_to_array((base_q.decode_for_transport),','))::double precision)
            and t.transportrealcode = r.code
            and r.transportdepartmntrfcd in (
            select d.transportdepartmentcod from entransportdep2dep d
            where d.departmentcode =  base_q.podr_code
            )
      ----
      )
      group by ts.transportrealcode ) as tr_max ,
entravelsheet ts, entravelsheetfuelremns tsfr, tkfueltype ft
where ts.datestart = tr_max.datestart
and ts.transportrealcode = tr_max.transportrealcode
and ts.code = tsfr.travelsheetrefcode
and tsfr.fueltyperefcode = ft.code
and ft.materialrefcode in
(select array2items(string_to_array((base_q.materialcode),','))::double precision)
and tsfr.countgenfinal > 0 ),0)::numeric,2) as pmm_count_on_start ,

round(coalesce((select sum(fsi.count1+fsi.count2+fsi.count3+fsi.count4+fsi.count5+fsi.count6)
    from enfueldistributionshet fs , enfueldistributinshttm fsi, tkfueltype ft
        where fs.code = fsi.fueldistributionrefcod
        and fs.fueltyperefcode = ft.code
        and fs.yeargen = base_q.p_year
        and fs.monthgen = base_q.p_month
        and ft.materialrefcode in
        (select array2items(string_to_array((base_q.materialcode),','))::double precision)
        and fsi.departmentrefcode in
        (select array2items(string_to_array((base_q.podr_for_all_limit),','))::double precision)
        and fsi.decadenumber = base_q.decadenumber),0)::numeric,2) as all_limit,

 /*round(coalesce((
select sum(tsfr.countgenfinal) from
      (select max(ts.datestart) as datestart, ts.transportrealcode
      from
      entravelsheet ts,
      entravelsheetfuelremns fr
      where
      ts.code = fr.travelsheetrefcode
      and ts.datestart < base_q.datestart
     and ts.statusrefcode = 4
      and ts.transportrealcode in (

      select r.code
          from  tktransportreal r
          where
            r.transportdepartmntrfcd in (
            select d.transportdepartmentcod from entransportdep2dep d
            where d.departmentcode in (
            select array2items(string_to_array((base_q.podr_for_count_start_all),','))::double precision)
            )

      )
      group by ts.transportrealcode ) as tr_max ,
entravelsheet ts, entravelsheetfuelremns tsfr, tkfueltype ft
where ts.datestart = tr_max.datestart
and ts.transportrealcode = tr_max.transportrealcode
and ts.code = tsfr.travelsheetrefcode
and tsfr.fueltyperefcode = ft.code
and ft.materialrefcode in
(select array2items(string_to_array((base_q.materialcode),','))::double precision)
and tsfr.countgenfinal > 0 ),0)::numeric,2)*/ 0 as pmm_count_on_start_all  /* остатки по всем машинам поидее не нужны так как в талонах остаток берем теперь только то что не БАКИ (во время выдачи топлива  ) и не резерз (во время резервирования на факт путевых)*/

from

(    select getdepartmentcodesdown(dp.code) || case when dp.code = 3 then ',500000019 ' else '' end as decode,
    dp.name as depname, dp.code as podr_code,  1 as ord,
case when params.p_decade::integer = 1 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('11'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then to_date('21'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 0 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
 end as datestart,
 case when params.p_decade::integer = 1 then to_date('10'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('20'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
            when params.p_decade::integer = 0 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
 end as datefinal,
 case when params.p_fueltype::integer = 1 /*бенз92*/ then '500000120,500002447'
                when params.p_fueltype::integer = 2 /*бенз95*/ then '75000844'
                when params.p_fueltype::integer = 3 /*дизтопл*/ then '75000843'
                when params.p_fueltype::integer = 0 then '75000843,75000844,500000120,500002447'
          end as materialcode,
          params.p_decade as decadenumber,
          case when dp.code = 481 then getdepartmentcodesdown(dp.code) || ',' || getdepartmentcodesdown(482)
          when dp.code = 482 then null
          else getdepartmentcodesdown(dp.code)
          end
          as decode_for_transport,

         case when dp.code = 481 then '481, 482'
         when dp.code = 482 then null else '' || dp.code::varchar || '' end as podr_for_limit,

         case when dp.code = 481 then '481, 482'
         when dp.code = 482 then null else '' || dp.code::varchar || '' end as podr_for_all_limit,

params.p_month, params.p_year,
case when dp.code = 481 then '481, 482'
         when dp.code = 482 then null else '' || dp.code::varchar || '' end as podr_for_count_start_all,
 ( select string_agg(q.molkod,',') from enspravmol q
 where q.departmentcode in
 (select array2items(string_to_array(getdepartmentcodesdown(dp.code),','))::double precision)  ) as mol_codes,

case when dp.code = 481 then  getdepartmentcodesdown(481) || ',' || getdepartmentcodesdown(482)
else null end as decode_for_hmem

    from endepartment dp,
     (select $P{pMonth}  as p_month,
     	           $P{pYear} as p_year,
     	           $P{pDecade} as p_decade,
     	           $P{pFuelType} as p_fueltype
     ) as params
                where dp.parentrefcode in (1, 731)
                  and dp.typerefcode = 1
                  and dp.code not in (3,4,5,500000019) /*берислав белозерку не берем , ПрАТ ЕКХерсонобленерго перенесем в апарат управления  */
union all
select getdepartmentcodesdown4pmm(dp.code) as decode,
      'Апарат управління (інше)' as depname,
       dp.code as podr_code,
       -1 as ord,
       case when params.p_decade::integer = 1 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('11'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then to_date('21'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 0 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
 end as datestart,
 case when params.p_decade::integer = 1 then to_date('10'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('20'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
            when params.p_decade::integer = 0 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
 end as datefinal,
 case when params.p_fueltype::integer = 1 /*бенз92*/ then '500000120,500002447'
                when params.p_fueltype::integer = 2 /*бенз95*/ then '75000844'
                when params.p_fueltype::integer = 3 /*дизтопл*/ then '75000843'
                when params.p_fueltype::integer = 0 then '75000843,75000844,500000120,500002447'
          end as materialcode,
          params.p_decade as decadenumber,
          null as decode_for_transport,
           '3' as podr_for_limit,
           null as podr_for_all_limit,
    params.p_month, params.p_year,
     null as podr_for_count_start_all,
     null as mol_codes,
     null as decode_for_hmem
  from endepartment dp,
   (select  $P{pMonth}  as p_month,
     	           $P{pYear} as p_year,
     	           $P{pDecade} as p_decade,
     	           $P{pFuelType} as p_fueltype
     ) as params
where
dp.code = 3
union all
select getdepartmentcodesdown(dp.code) as decode,
       'Апарат управління (' ||  dp.shortname || ')' as depname,
       dp.code as podr_code,
       0 as ord,
       case when params.p_decade::integer = 1 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('11'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then to_date('21'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 0 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
 end as datestart,
 case when params.p_decade::integer = 1 then to_date('10'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('20'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
            when params.p_decade::integer = 0 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
 end as datefinal,
 case when params.p_fueltype::integer = 1 /*бенз92*/ then '500000120,500002447'
                when params.p_fueltype::integer = 2 /*бенз95*/ then '75000844'
                when params.p_fueltype::integer = 3 /*дизтопл*/ then '75000843'
                when params.p_fueltype::integer = 0 then '75000843,75000844,500000120,500002447'
          end as materialcode,
          params.p_decade as decadenumber,
          null as decode_for_transport,
          dp.code::varchar as podr_for_limit,
          null as podr_for_all_limit,
          params.p_month, params.p_year,
          null as podr_for_count_start_all,
           ( select string_agg(q.molkod,',') from enspravmol q
 where q.departmentcode in
 (select array2items(string_to_array(getdepartmentcodesdown(dp.code),','))::double precision)  ) as mol_codes,
null as decode_for_hmem
  from endepartment dp,
       (select  $P{pMonth}  as p_month,
     	           $P{pYear} as p_year,
     	           $P{pDecade} as p_decade,
     	           $P{pFuelType} as p_fueltype
     ) as params
where
dp.code  in (79, 73, 70, 71, 91, 775, 675)

union all
select getdepartmentcodesdown(dp.code) as decode,
      'Апарат управління (загалом)' as depname,
       dp.code as podr_code,
       -2 as ord,
       case when params.p_decade::integer = 1 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('11'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then to_date('21'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 0 then to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
 end as datestart,
 case when params.p_decade::integer = 1 then to_date('10'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 2 then to_date('20'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy' )
            when params.p_decade::integer = 3 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
            when params.p_decade::integer = 0 then last_day(to_date('01'||','||params.p_month::integer||','||params.p_year::integer,'dd.mm.yyyy'))
 end as datefinal,
 case when params.p_fueltype::integer = 1 /*бенз92*/ then '500000120,500002447'
                when params.p_fueltype::integer = 2 /*бенз95*/ then '75000844'
                when params.p_fueltype::integer = 3 /*дизтопл*/ then '75000843'
                when params.p_fueltype::integer = 0 then '75000843,75000844,500000120,500002447'
          end as materialcode,
          params.p_decade as decadenumber,
          getdepartmentcodesdown(dp.code) as decode_for_transport,
 case when dp.code = 3 then '3,79,73,70,71,91,775,675'
                else '' || dp.code::varchar || '' end podr_for_limit,
 case when dp.code = 3 then '3,79,73,70,71,91,775,675'
                else '' || dp.code::varchar || '' end podr_for_all_limit,
    params.p_month, params.p_year,
               case when dp.code = 3 then '3,79,73,70,71,91,775,675'
                else '' || dp.code::varchar || '' end podr_for_count_start_all,
     ( select string_agg(q.molkod,',') from enspravmol q
 where q.departmentcode in
 (select array2items(string_to_array(getdepartmentcodesdown(dp.code),','))::double precision)  ) as mol_codes,
 null as decode_for_hmem
  from endepartment dp,
   (select  $P{pMonth}  as p_month,
     	           $P{pYear} as p_year,
     	           $P{pDecade} as p_decade,
     	           $P{pFuelType} as p_fueltype
     ) as params
where
dp.code = 3

order by 4, 3
) as base_q ) as final_q]]>
	</queryString>
	<field name="depname" class="java.lang.String">
		<fieldDescription><![CDATA[Підрозділ (ФК)]]></fieldDescription>
	</field>
	<field name="podr_code" class="java.math.BigDecimal"/>
	<field name="pmm_count_on_start" class="java.math.BigDecimal"/>
	<field name="services_plan" class="java.math.BigDecimal"/>
	<field name="services_fact" class="java.math.BigDecimal"/>
	<field name="services_limit" class="java.math.BigDecimal"/>
	<field name="current_repair_plan" class="java.math.BigDecimal"/>
	<field name="current_repair_fact" class="java.math.BigDecimal"/>
	<field name="capital_repair_plan" class="java.math.BigDecimal"/>
	<field name="capital_repair_fact" class="java.math.BigDecimal"/>
	<field name="maintenance_plan" class="java.math.BigDecimal"/>
	<field name="maintenance_fact" class="java.math.BigDecimal"/>
	<field name="sbyt_plan" class="java.math.BigDecimal"/>
	<field name="sbyt_fact" class="java.math.BigDecimal"/>
	<field name="other_plan" class="java.math.BigDecimal"/>
	<field name="other_fact" class="java.math.BigDecimal"/>
	<field name="maintenance_sbyt_repairs_and_other_limit" class="java.math.BigDecimal"/>
	<field name="cap_build_ip_plan" class="java.math.BigDecimal"/>
	<field name="cap_build_ip_fact" class="java.math.BigDecimal"/>
	<field name="cap_builders_ip_limit" class="java.math.BigDecimal"/>
	<field name="cap_build_other_plan" class="java.math.BigDecimal"/>
	<field name="cap_build_other_fact" class="java.math.BigDecimal"/>
	<field name="cap_builders_other_limit" class="java.math.BigDecimal"/>
	<field name="vrtu_plan" class="java.math.BigDecimal"/>
	<field name="vrtu_fact" class="java.math.BigDecimal"/>
	<field name="vrtu_limit" class="java.math.BigDecimal"/>
	<field name="all_limit" class="java.math.BigDecimal"/>
	<field name="pmm_count_on_start_all" class="java.math.BigDecimal"/>
	<field name="mol_codes" class="java.lang.String"/>
	<field name="decode" class="java.lang.String"/>
	<field name="datestart" class="java.lang.String"/>
	<field name="datefinal" class="java.lang.String"/>
	<field name="avr_plan" class="java.math.BigDecimal"/>
	<field name="avr_fact" class="java.math.BigDecimal"/>
	<field name="avr_limit" class="java.math.BigDecimal"/>
	<field name="all_plan" class="java.math.BigDecimal"/>
	<field name="ord" class="java.lang.Integer"/>
	<field name="odg_plan" class="java.math.BigDecimal"/>
	<field name="odg_fact" class="java.math.BigDecimal"/>
	<variable name="pmm_count_on_start1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{rest_all_start}]]></variableExpression>
	</variable>
	<variable name="services_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{services_plan}]]></variableExpression>
	</variable>
	<variable name="services_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{services_fact}]]></variableExpression>
	</variable>
	<variable name="services_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{services_limit}]]></variableExpression>
	</variable>
	<variable name="current_repair_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{current_repair_plan}]]></variableExpression>
	</variable>
	<variable name="current_repair_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{current_repair_fact}]]></variableExpression>
	</variable>
	<variable name="capital_repair_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{capital_repair_plan}]]></variableExpression>
	</variable>
	<variable name="capital_repair_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{capital_repair_fact}]]></variableExpression>
	</variable>
	<variable name="maintenance_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{maintenance_plan}]]></variableExpression>
	</variable>
	<variable name="maintenance_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{maintenance_fact}]]></variableExpression>
	</variable>
	<variable name="sbyt_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{sbyt_plan}]]></variableExpression>
	</variable>
	<variable name="sbyt_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{sbyt_fact}]]></variableExpression>
	</variable>
	<variable name="other_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{other_plan}]]></variableExpression>
	</variable>
	<variable name="other_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{other_fact}]]></variableExpression>
	</variable>
	<variable name="maintenance_sbyt_repairs_and_other_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{maintenance_sbyt_repairs_and_other_limit}]]></variableExpression>
	</variable>
	<variable name="cap_build_ip_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_ip_plan}]]></variableExpression>
	</variable>
	<variable name="cap_build_ip_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_ip_fact}]]></variableExpression>
	</variable>
	<variable name="cap_builders_ip_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_builders_ip_limit}]]></variableExpression>
	</variable>
	<variable name="cap_build_other_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_other_plan}]]></variableExpression>
	</variable>
	<variable name="cap_build_other_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_build_other_fact}]]></variableExpression>
	</variable>
	<variable name="cap_builders_other_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{cap_builders_other_limit}]]></variableExpression>
	</variable>
	<variable name="vrtu_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{vrtu_plan}]]></variableExpression>
	</variable>
	<variable name="vrtu_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{vrtu_fact}]]></variableExpression>
	</variable>
	<variable name="vrtu_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{vrtu_limit}]]></variableExpression>
	</variable>
	<variable name="all_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{all_limit}]]></variableExpression>
	</variable>
	<variable name="result1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{vidacha}]]></variableExpression>
	</variable>
	<variable name="rest_from_fk" class="java.math.BigDecimal">
		<variableExpression><![CDATA[((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getFuelRestByMOLAndTypeOnDate($F{decode}, $P{pFuelType}, $F{datestart}, 0)]]></variableExpression>
	</variable>
	<variable name="avr_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{avr_plan}]]></variableExpression>
	</variable>
	<variable name="avr_limit1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{avr_limit}]]></variableExpression>
	</variable>
	<variable name="avr_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{avr_fact}]]></variableExpression>
	</variable>
	<variable name="rest_from_fk_avz" class="java.math.BigDecimal">
		<variableExpression><![CDATA[((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getFuelRestAVZByMOLAndTypeOnDate($F{decode}, $P{pFuelType}, $F{datestart})]]></variableExpression>
	</variable>
	<variable name="pmm_count_on_start_avz1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{rest_from_fk_avz}]]></variableExpression>
	</variable>
	<variable name="vidacha" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk})).doubleValue() < 0 ? new BigDecimal(0) :
$F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}))

/* при выдаче топлива на путевых оно переходит в назначение БАКИ. поэтому остатки фин берем все что не  резерв и не баки и сумируем остатки в баках по машинам которые используются в декаде $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))).doubleValue() < 0 ? new BigDecimal(0) :
$F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))) */]]></variableExpression>
	</variable>
	<variable name="rest_all_start" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{pmm_count_on_start}.add($V{rest_from_fk})
/* при выдаче топлива на путевых оно переходит в назначение БАКИ. поэтому остатки фин берем все что не  резерв и не баки и сумируем остатки в баках по машинам которые используются в декаде  $F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))*/]]></variableExpression>
	</variable>
	<variable name="odg_plan1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{odg_plan}]]></variableExpression>
	</variable>
	<variable name="odg_fact1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ord} == -2 ? new BigDecimal(0) :
$F{odg_fact}]]></variableExpression>
	</variable>
	<variable name="companyShortName" class="java.lang.String">
		<variableExpression><![CDATA[$V{companyShortName}]]></variableExpression>
		<initialValueExpression><![CDATA[((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getSettings("company.shortname")]]></initialValueExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="30" splitType="Stretch">
			<textField>
				<reportElement positionType="Float" x="0" y="0" width="150" height="30"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{depname}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="250" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{services_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="250" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{services_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="300" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{services_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="350" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{current_repair_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="350" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{current_repair_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="400" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{capital_repair_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="400" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{capital_repair_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="450" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{maintenance_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="450" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{maintenance_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="500" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sbyt_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="500" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sbyt_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="600" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{other_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="600" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{other_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="650" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{maintenance_sbyt_repairs_and_other_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="700" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_ip_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="700" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_ip_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="750" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_builders_ip_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="800" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_other_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="800" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_build_other_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="850" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cap_builders_other_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="900" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vrtu_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="900" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vrtu_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="950" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vrtu_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1100" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{all_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1150" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vidacha}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="150" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{rest_all_start}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="1000" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avr_plan}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="1000" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avr_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1050" y="0" width="50" height="30" backcolor="#FFFFD9"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avr_limit}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="200" y="0" width="50" height="30" backcolor="#5AFF52"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{rest_from_fk_avz}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1200" y="0" width="50" height="30" backcolor="#66FFCC"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{all_limit}.subtract(
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk})).doubleValue() < 0 ? new BigDecimal(0) :
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}))
)


/*при выдаче топлива на путевых оно переходит в назначение БАКИ. поэтому остатки фин берем все что не  резерв и не баки и сумируем остатки в баках по машинам которые используются в декаде $F{all_limit}.subtract(
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))).doubleValue() < 0 ? new BigDecimal(0) :
            $F{all_plan}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all})))
)*/

/*$F{all_limit}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all}))).doubleValue() < 0 ? new BigDecimal(0) :
$F{all_limit}.subtract($F{pmm_count_on_start}.add($V{rest_from_fk}.subtract($F{pmm_count_on_start_all})))*/]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="550" y="15" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{odg_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" x="550" y="0" width="50" height="15"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{odg_plan}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="30" splitType="Stretch">
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="150" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{pmm_count_on_start1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="250" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{services_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="250" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{services_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="300" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{services_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="350" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{current_repair_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="350" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{current_repair_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="400" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{capital_repair_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="400" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{capital_repair_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="450" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{maintenance_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="450" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{maintenance_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="500" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sbyt_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="500" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sbyt_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="600" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{other_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="600" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{other_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="650" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{maintenance_sbyt_repairs_and_other_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="700" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_ip_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="700" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_ip_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="750" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_builders_ip_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="800" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_other_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="800" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_build_other_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="850" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cap_builders_other_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="900" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vrtu_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="900" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vrtu_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="950" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vrtu_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1100" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{all_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1150" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{result1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" mode="Opaque" x="0" y="0" width="150" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Всього по декаді " + $P{pDecade} + ":"]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1050" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{avr_limit1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1000" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{avr_plan1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="1000" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{avr_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="200" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{pmm_count_on_start_avz1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00" isBlankWhenNull="true">
				<reportElement positionType="Float" mode="Opaque" x="1200" y="0" width="50" height="30" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isBold="true" isItalic="true"/>
				</textElement>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="550" y="15" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{odg_fact1}]]></textFieldExpression>
			</textField>
			<textField pattern="#0.00">
				<reportElement positionType="Float" mode="Opaque" x="550" y="0" width="50" height="15" backcolor="#D1D1D1"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Arial" size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{odg_plan1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
