<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 4.5.0-->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RepBonusChild1" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="BlankPage" columnWidth="842" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" scriptletClass="com.ksoe.energynet.reports.common.FINScriptlet">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="ireport.scriptlethandling" value="2"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA["C:\\iReport-3.0.0\\tmp\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="pdate1" class="java.lang.String">
		<defaultValueExpression><![CDATA["31.05.2010"]]></defaultValueExpression>
	</parameter>
	<parameter name="rencode" class="java.lang.Integer" isForPrompting="false"/>
	<parameter name="netConnection" class="java.lang.Object" isForPrompting="false"/>
	<parameter name="pdate2" class="java.lang.String">
		<defaultValueExpression><![CDATA["31.05.2010"]]></defaultValueExpression>
	</parameter>
	<parameter name="plankind" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select trim(o.podr_nazv) as podr_nazv , o.podr_id , o.main_podr_id , trim(podr_nazv_main) as podr_nazv_main ,
       trim(fio) as fio , trim(post_fin) as post_fin , sumhoursotpusk , trim(tabn) as tabn  from
(
select o.*, row_number() over (order by kadry.pkg_Podr_Utils.Concat_Pos(o.Podr_Id, to_date($P{pdate2} , 'dd.mm.yyyy'))) rw
from
(
select sum(sel_vn.sumhoursotpusk) sumhoursotpusk   ,  sel_vn.podr_nazv , sel_vn.podr_id , sel_vn.main_podr_id , sel_vn.podr_nazv_main
       , sel_vn. tabn , sel_vn.fio ,  sel_vn.post_fin    from (
select   case when ((to_date('01.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
					       )
				              Then graf.rday1 else 0 end
				        +
				       case when ((to_date('02.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				              Then graf.rday2 else 0 end
				      +
				       case when ((to_date('03.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday3 else 0 end
				        +
				       case when ((to_date('04.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday4 else 0 end
				      +
				       case when ((to_date('05.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday5 else 0 end
				      +
				       case when ((to_date('06.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday6 else 0 end
				      +
				       case when ((to_date('07.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday7 else 0 end
				      +
				       case when ((to_date('08.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday8 else 0 end
				      +
				       case when ((to_date('09.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday9 else 0 end
				      +
				       case when ((to_date('10.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday10 else 0 end
				      +
				       case when ((to_date('11.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday11 else 0 end
				      +
				       case when ((to_date('12.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday12 else 0 end
				      +
				       case when ((to_date('13.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday13 else 0 end
				      +
				       case when ((to_date('14.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday14 else 0 end
				      +
				       case when ((to_date('15.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday15 else 0 end
				      +
				       case when ((to_date('16.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				                Then graf.rday16 else 0 end
				      +
				       case when ((to_date('17.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday17 else 0 end
				      +
				       case when ((to_date('18.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday18 else 0 end
				      +
				       case when ((to_date('19.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday19 else 0 end
				      +
				       case when ((to_date('20.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday20 else 0 end
				      +
				       case when ((to_date('21.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday21 else 0 end
				      +
				       case when ((to_date('22.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday22 else 0 end
				      +
				       case when ((to_date('23.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday23 else 0 end
				      +
				       case when ((to_date('24.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday24 else 0 end
				      +
				       case when ((to_date('25.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday25 else 0 end
				      +
				       case when ((to_date('26.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday26 else 0 end
				      +
				       case when ((to_date('27.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday27 else 0 end
				      +
				       case when ((to_date('28.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday28 else 0 end
				      +
				       case when (( mod(to_number(to_char(to_date($P{pdate2},'dd.mm.yyyy'),'yyyy')) , 4 ) = 0 ) and ( to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm') = '02' ))  or to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm') <> '02' then
				       case when ((to_date('29.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday29 else 0 end
				      else 0  end
				      +  case when to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm') not in ('02') then
				       case when ((to_date('30.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday30 else 0 end
				      else 0  end
				      +  case when to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm')  in ( '01' , '03', '05', '07', '08' , '10' , '12'  )  then
				       case when ((to_date('31.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday31 else 0 end
				      else 0  end
				               sumhoursotpusk  ,


       podr_nazv , podr_id , main_podr_id , podr_nazv_main
       , tabnfinwork tabn , fio ,  post_fin  , dat.S, dat.PO
       From (

Select
  sel_podr.podr_nazv , sel_podr.podr_id , sel_podr.main_podr_id , sel_podr.podr_nazv_main
       , sel_hum.tabn tabnfinwork , sel_hum.fio , sel_hum.post_nazv post_fin

from (
SELECT
/* Назначение на Должность*/
  n.Id,
   /*Карточка*/
  n.Karta_Id,
  kr.TabN,
  fio.F||' '||fio.I||' '||fio.O FIO,
  DECODE(kr.S, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), kr.S) Karta_S,
  DECODE(kr.Po, TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), kr.Po) Karta_Po,
  kr.Sovm,
  DECODE(kr.Sovm,'1','V') Sovm_Show,
   /*назначение*/
  n.Date_Start,
  DECODE(n.Date_Finish, TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), n.Date_Finish) Date_Finish,
  n.Start_Pricaz_Id,
  pr1.Nomer      Start_Pricaz_Nomer,
  DECODE(pr1.Data, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), pr1.Data) Start_Pricaz_Data,
  /*pr1.Utver      Start_Pricaz_Utver,*/
  n.Finish_Pricaz_Id,
  pr2.Nomer      Finish_Pricaz_Nomer,
  DECODE(pr2.Data, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), pr2.Data) Finish_Pricaz_Data,
  /*pr2.Utver      Finish_Pricaz_Utver,*/

  DECODE(nd.Date_Start, n.Date_Start, TO_DATE(NULL), nd.Date_Start) Nazn_Day_Date_Start,
  nd.Pricaz_Id   Nazn_Day_Pricaz_Id,
  pr3.Nomer      Nazn_Day_Pricaz_Nomer,
  DECODE(pr3.Data, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), pr3.Data) Nazn_Day_Pricaz_Data,
  /*pr3.Utver      Day_Pricaz_Utver,*/
  (SELECT COUNT(*) FROM kadry.Nazn_Day WHERE Nazn_Id = n.Id) Day_Count,

  DECODE(k.Prom_Id, 3,pd.Podr_Prom_Id, k.Prom_Id) Prom_Id,
  prom.Nazv       Prom_Nazv,
  prom.Sokr_Nazv  Prom_Sokr_Nazv,
  n.Doljnost_Id,
       pd.Podr_Id,
       pd.Podr_Kod,
       pd.Podr_Nazv,
       pd.Podr_Date_Start,
       ps.Post_Id,
       ps.KP_Kod,
       ps.OKPDTR_Kod,
  RTRIM(ps.Post_Nazv) Post_Nazv,
       nd.IO,
       DECODE(nd.IO,1,'И.О.', '') IO_Nazv,
       DECODE(nd.IO,1,'и.о. '||ps.Post_Nazv, ps.Post_Nazv) Post_Nazv_IO,

       pd.Ceh_Id,
       pd.Ceh_Kod,
       pd.Ceh_Nazv,

  nd.Stavka,
  NVL(nd.Oklad, DECODE (dd.OPLATA_VID_ID, 4,dd.Oklad,
      ROUND(ROUND(dd.Oklad*nd.Stavka,2)*NVL(nd.Uvel_Koef, dd.Uvel_Koef),2))) Oklad_New,
  NVL(nd.Oklad, dd.Oklad)            Oklad,
  NVL(nd.Tarif_Koef, dd.Tarif_Koef)  tarif_Koef,
  NVL(nd.Uvel_Koef, dd.Uvel_Koef)    Uvel_Koef,
       nd.Oklad           Nazn_Oklad,
       nd.tarif_Koef      Nazn_Tarif_Koef,
       nd.Uvel_Koef       Nazn_Uvel_Koef,
       nd.Vid_Vakans_Id,
       d.Date_Start       Doljnost_Date_Start,
  dd.Kod                  Doljnost_Kod,
  kadry.Pkg_Doljnost_Utils.Kod_Format(dd.Kod) Doljnost_Kod_S,
       d.Pos              Doljnost_Pos,
       dd.Date_Start      Doljnost_Day_Date_Start,
  dd.Oplata_Vid_Id,
  g.Norma           Grafik_Norma,
  d.Post_Id         Doljnost_Post_Id,
  ps1.KP_Kod        Doljnost_KP_Kod,
  ps1.OKPDTR_Kod    Doljnost_OKPDTR_Kod,
  RTRIM(ps1.Post_Nazv)  Doljnost_Post_Nazv,
  ps1.Prof_Id,
  ps1.Prof_Nazv,
  ps1.Razr_Id,
  ps1.Razr_Nazv,
  dd.Oklad          Doljnost_Oklad,
  dd.Tarif_Koef     Doljnost_Tarif_Koef,
  dd.Stavka         Doljnost_Stavka,
  nd.Prim,
/* предыдущее назначение*/
  n.Perevod_Vid_Id,


  DECODE(n.Perevod_Nazn_Id, NULL, '', pf2.NAZV||' '||ps2.Prof_Dopoln||' '||rz2.NAZV) Perevod_Post_Nazv,
  (SELECT Nazv
     FROM kadry.Podr_Day pd2
     WHERE Podr_Id = d2.Podr_Id
       AND n2.Date_Start between pd2.date_start and pd2.date_finish) Prev_Podr_Nazv,
/* следующее назначение*/
  n3.Perevod_Vid_Id     Next_Perevod_Vid_Id,
  pv3.Nazv              Next_Perevod_Vid_Nazv,
  DECODE(n3.id, null,'',
         DECODE(n3.date_start, TO_DATE('01.01.1900','DD.MM.YYYY'), '...',
                   TO_CHAR(n3.date_start, 'dd.mm.yyyy'))||' - '
           ||DECODE(n3.date_finish, TO_DATE('01.01.3000','DD.MM.YYYY'), '...',
                    TO_CHAR(n3.date_finish, 'dd.mm.yyyy'))) next_date_s_f,
  n3.Perevod_Osnova_Id  Next_Perevod_Osnova_Id,
  n3.perevod_osnova_add Next_Osnova_Add,
  os3.NKod              Next_Osnova_Kod,
  os3.Nazv              Next_Osnova_Nazv,
  n3.perevod_usl_id Next_perevod_usl_id,
  pu3.Kod Next_Usl_Kod,
  pu3.Nazv Next_Usl_Nazv,
  n3.Perevod_Nazn_Id    Next_Perevod_Nazn_Id,
  DECODE(n3.Perevod_Nazn_Id, NULL, '', pf3.NAZV||' '||ps3.Prof_Dopoln||' '||rz3.NAZV) Next_Perevod_Post_Nazv,
  (SELECT Nazv
     FROM kadry.Podr_Day pd3
     WHERE Podr_Id = d3.Podr_Id
       AND n3.Date_Start between pd3.date_start and pd3.date_finish) Next_Podr_Nazv,

  n.Karta_Link_Id,
  nd.Nazn_Vid_Id,
  nv.Nazv           Nazn_Vid_Nazv,
  nv.Vrem           Nazn_Vid_Vrem,
  DECODE(nv.Vrem,'1','V') Nazn_Vid_Vrem_Show,
/*  nd.Nepoln_Rab     Nepoln_Rab,*/
  nd.Regim_Add      Regim_Add,
  nd.Regim_Id       Regim_Id,
  r.Nazv            Regim_Nazv,
  nd.Post_id        pereopred_Post_id,
  ps.post_nazv      pereopred_post_nazv

FROM
  kadry.Prom            prom,
  kadry.Kategory        k,
  kadry.v_post          vp,
  (SELECT gp2.Grafik_Id, gp2.Norma
     FROM  kadry.Grafik_Period  gp2
     WHERE TO_DATE ($P{pdate2}, 'dd.mm.yyyy') BETWEEN gp2.S AND gp2.Po
       AND rownum<=1) g,
  kadry.Doljnost      d,
  kadry.Doljnost_Day  dd,
  (SELECT p.Id             Podr_Id,
          p.Date_Start     Podr_Date_Start,
          p.Date_Finish    Podr_Date_Finish,
          pd.ROWID         Podr_Day_Row_Id,
          pd.Podr_Id       Podr_Day_Podr_Id,
          pd.Date_Start    Podr_Day_Date_Start,
          pd.Main_Podr_Id  Main_Podr_Id,
          pd.Podr_Vid_Id   Podr_Vid_Id,
          pd.Nazv          Podr_Nazv,
          pd.Sokr_Nazv     Podr_Sokr_Nazv,
          pd.Kod           Podr_Kod,
          pd.Prom_Id       Podr_Prom_Id,
          pd.Pos           Podr_Pos,
          pd.Vne_Shtata    Vne_Shtata,
          ceh.ROWID        Ceh_Row_Id,
          ceh.Podr_Id      Ceh_Id,
          ceh.Date_Start   Ceh_Date_Start,
          ceh.Main_Podr_Id Ceh_Main_Podr_Id,
          ceh.Podr_Vid_Id  Ceh_Vid_Id,
          ceh.Nazv         Ceh_Nazv,
          ceh.Sokr_Nazv    Ceh_Sokr_Nazv,
          ceh.Kod          Ceh_Kod,
          ceh.Prom_Id      Ceh_Prom_Id,
          ceh.Pos          Ceh_Pos
     FROM kadry.Podr_Day  ceh,
          kadry.Podr_Day  pd,
          kadry.Podr      p
    WHERE pd.Podr_Id(+) = p.Id
      AND (pd.Podr_Id IS NULL
        OR pd.ROWID = (SELECT SUBSTR(MAX(TO_CHAR(pd1.Date_Start,'J')||ROWID),8)
                          FROM kadry.Podr_Day pd1
                         WHERE pd1.Podr_Id=pd.Podr_Id
                           AND pd1.Date_Start<=TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
          )
      AND ceh.Podr_Id = kadry.pkg_podr_utils.Get_Struct_Ed_Id_Buf(p.Id, TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
      AND ceh.ROWID = (SELECT SUBSTR(MAX(TO_CHAR(ceh1.date_start,'J')||ROWID),8)
                          FROM kadry.Podr_Day ceh1
                         WHERE ceh1.Podr_Id=ceh.Podr_Id
                           AND ceh1.Date_Start<=TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
      AND p.Id in (SELECT p.podr_id /*, p.podr_nazv ,  p.main_podr_id
   , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
*/
FROM
  kadry.v_Podr_All_Rab p/*,
  kadry.v_dostup       v*/
WHERE /*(v.Podr_List IS NULL OR INSTR(v.Podr_List, '_'||p.Podr_Id||'_') <> 0)
  AND*/ to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
  and  ((p.podr_vid_id = 9 ) or  ( p.main_podr_id in ( select p.podr_id from kadry.v_Podr_All_Rab p where p.ceh_id = $P{rencode}
                                                                                    and p.podr_vid_id = 9 )
                                             )  )
  and /*p.ceh_id*/ p.podr_id IN
  ----- viborka podr
  ( select   podr_id
    from (
SELECT p.podr_nazv , p.podr_id , p.main_podr_id
   , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
FROM
  kadry.v_Podr_All_Rab p/*,
  kadry.v_dostup       v*/
WHERE /*(v.Podr_List IS NULL OR INSTR(v.Podr_List, '_'||p.Podr_Id||'_') <> 0)
  AND */ to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
  and  ((p.podr_vid_id = 9 ) or  ( p.main_podr_id in ( select p.podr_id from kadry.v_Podr_All_Rab p where p.ceh_id = $P{rencode}
                                                                                    and p.podr_vid_id = 9 )
                                             )  )
  and p.ceh_id = $P{rencode}

UNION
  /*юнион того где выбраное подразд в свою очередь тоже с признаком НВЗ и у него есть подчиненные */
  select podr_nazv , podr_id , main_podr_id , podr_nazv_main from
  (
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.podr_id = $P{rencode} )  )
  UNION
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.main_podr_id = $P{rencode} )  )

   )

)


 )
                        )
  ) pd,
  kadry.v_Post       ps,
  kadry.v_Post       ps1,


  kadry.Perevod_Vid  pv,
  kadry.perevod_usl  pu,
  kadry.Osnova       os,
  kadry.Nazn         n2,
  kadry.Doljnost     d2,
  kadry.Post         ps2,
  kadry.Razr         rz2,
  kadry.Prof         pf2,

  kadry.Perevod_Vid  pv3,
  kadry.perevod_usl  pu3,
  kadry.Osnova       os3,
  kadry.Nazn         n3,
  kadry.Doljnost     d3,
  kadry.Post         ps3,
  kadry.Razr         rz3,
  kadry.Prof         pf3,


  kadry.FIO          fio,
  kadry.Karta        kr,
  kadry.Nazn_Vid     nv,
  kadry.Pricaz       pr1,
  kadry.Pricaz       pr2,
  kadry.Pricaz       pr3,

  kadry.Regim        r,
  kadry.Nazn_Day     nd,
  kadry.Nazn         n

WHERE (nd.Nazn_Id = n.Id
  AND vp.Post_Id(+) = nd.post_id


  AND nd.Date_Start <= GREATEST(n.Date_Start, TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
  AND NOT EXISTS
     (SELECT NULL FROM kadry.s_Nazn_Day nd2
       WHERE nd2.Nazn_Id = nd.Nazn_Id
         AND nd2.Date_Start <= GREATEST(n.Date_Start, TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
         AND nd2.Date_Start > nd.Date_Start)
  AND n.Start_Pricaz_Id  = pr1.Id
  AND n.Finish_Pricaz_Id = pr2.Id
  AND nd.Pricaz_Id       = pr3.Id

  AND n.Doljnost_Id = d.Id
  AND pd.Podr_Id = d.Podr_Id

  AND ps.Post_Id = NVL(nd.Post_Id, d.Post_Id)
  AND ps1.Post_Id = d.Post_Id
  AND k.Id = d.Kategory_Id
  AND prom.Id = DECODE(k.Prom_Id, 3,pd.Podr_Prom_Id, k.Prom_Id)

  AND dd.Doljnost_Id(+) = d.Id

  AND (dd.Doljnost_Id IS NULL
    OR (dd.Date_Start <= n.Date_Finish
      AND NOT EXISTS (SELECT NULL FROM kadry.s_Doljnost_Day dd2
                      WHERE dd2.Doljnost_Id = dd.Doljnost_Id
                        AND dd2.Date_Start <= n.Date_Finish
                        AND dd2.Date_Start > dd.Date_Start)))

  AND dd.Grafik_Id = g.Grafik_Id(+)

  AND pv.Id(+) = n.Perevod_Vid_Id
  AND pu.id(+) = n.Perevod_Usl_id
  AND os.Id(+) = n.Perevod_Osnova_Id
  AND n.Perevod_Nazn_Id = n2.Id(+)
  AND n2.Doljnost_Id = d2.Id(+)
  AND ps2.Id(+) = d2.Post_Id
  AND pf2.Id(+) = ps2.Prof_Id
  AND rz2.Id(+) = ps2.Razr_Id

  AND n.Id = n3.Perevod_Nazn_Id(+)
  AND pu3.id(+) = n3.perevod_Usl_id
  AND pv3.Id(+) = n3.Perevod_Vid_Id
  AND os3.Id(+) = n3.Perevod_Osnova_Id
  AND d3.Id(+)  = n3.Doljnost_Id
  AND ps3.Id(+) = d3.Post_Id
  AND pf3.Id(+) = ps3.Prof_Id
  AND rz3.Id(+) = ps3.Razr_Id


  AND n.Karta_Id     = kr.Id
  AND kr.prim like ('%НВЗ%')
  and (kr.prim not like ('%DTU%') and kr.prim not like ('%IZ%') )
  AND fio.Id         = kr.FIO_Id
  AND nd.Nazn_Vid_Id = nv.Id(+)
  AND nd.Regim_Id  = r.Id(+)

) AND
      n.Date_Finish >= TO_DATE ($P{pdate2}, 'dd.mm.yyyy')
      and n.date_start < TO_DATE ($P{pdate2}, 'dd.mm.yyyy')  -- добавил условие т.к из финкол попадали лишние люди которые назначены выше даты среза
   --   AND ps1.prof_id IN (9086 , 7294 , 7241, 7242 , 7243 , 7244 , 7245 , 7246 , 7169, 7170 , 7173 , 7251 , 7252 , 7253 , 7254 , 7256 , 7269 , 7275 , 7295 , 7296 , 7334 , 8144 , 8455 , 8482 , 8496 , 8507 , 9049 ,8453)
  and (kr.prim not like ('%НВЗ_Е%') or kr.prim not like ('%НВЗ_Е%') )
  and (kr.prim not like ('%DTU%') and kr.prim not like ('%IZ%') )
 ORDER BY kadry.pkg_Podr_Utils.Concat_Pos(pd.Podr_Id, to_date($P{pdate2} , 'dd.mm.yyyy')) ,  kr.TabN, n.Date_Start desc

 ) sel_hum
   , ( select  podr_nazv , podr_id , main_podr_id
   , podr_nazv_main from (
SELECT p.podr_nazv , p.podr_id , p.main_podr_id
   , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
FROM
  kadry.v_Podr_All_Rab p/*,
  kadry.v_dostup       v*/
WHERE /*(v.Podr_List IS NULL OR INSTR(v.Podr_List, '_'||p.Podr_Id||'_') <> 0)
  AND */ to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
  and  ((p.podr_vid_id = 9 ) or  ( p.main_podr_id in ( select p.podr_id from kadry.v_Podr_All_Rab p where p.ceh_id = $P{rencode}
                                                                                    and p.podr_vid_id = 9 )
                                             )  )
  and p.ceh_id = $P{rencode}

UNION
  /*юнион того где выбраное подразд в свою очередь тоже с признаком НВЗ и у него есть подчиненные */
  select podr_nazv , podr_id , main_podr_id , podr_nazv_main from
  (
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.podr_id = $P{rencode} )  )
  UNION
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.main_podr_id = $P{rencode} )  )

   )

)

 ) sel_podr
Where sel_podr.podr_id = sel_hum.podr_id(+)
 /* and sel_podr.podr_id = 273 */
 /*убрал отсюда  order by */
) frr ,
(
				      SELECT
				       DECODE(odi.S,  TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), odi.S) S,
				       DECODE(odi.Po, TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), odi.PO) PO ,
				       k.tabn
				      FROM
				       kadry.vOtp    vo,
				       kadry.Karta   k,
				       kadry.Otp o,

				       kadry.Otp_Razdel r,
				       (select odi1.Id
				             , odi1.Otp_Id
				             , odi1.S
				             , odi1.Po
				             , odi1.Kol
				             , odi1.data_vvoda
				             , odi1.Kompens
				             , odi1.Mat_Pom
				             , odi1.Otp_Razdel_Id
				             , odi1.Osnova_Id

				             , odi1.Raspr
				             , odi1.Pricaz_Id
				            , p1.data
				             , p1.nomer
				             , p1.project
				          from kadry.Pricaz p1,
				               kadry.Otp_Dni_Ispolz odi1
				         where odi1.Pricaz_Id = p1.Id(+)
				          ) odi
				      WHERE ((vo.Id = o.vOtp_Id
				      AND o.Karta_Id = k.Id
				      AND odi.Otp_Razdel_Id = r.Id(+)
				      AND o.Id = odi.Otp_Id
				      ) AND o.Karta_Id = o.Karta_Id
				     /* and k.tabn = '67352'  */
                                  --     AND k.prim not like ('НВЗ_Е')  -- что б не попадали энергозбытовые люди
                       ) AND o.Karta_Id = o.Karta_Id
				                        /*  and k.tabn = frr.tabnfinwork */
				       and trunc(to_date($P{pdate2},'dd.mm.yyyy'),'mm') between trunc(odi.s,'mm') and last_day(odi.po)
				      ) dat

				      ,
( SELECT  rday1 , rday2 , rday3 , rday4 , rday5 , rday6 , rday7 , rday8 , rday9 , rday10,
				        rday11, rday12, rday13, rday14, rday15, rday16, rday17, rday18, rday19, rday20,
				        rday21, rday22, rday23, rday24, rday25, rday26, rday27, rday28, rday29, rday30, rday31 From zarpherson.grafik_work_view gwv
				      Where gwv.date_rasch = trunc(to_date($P{pdate2} , 'dd.mm.yyyy'),'mm')
				      and  gwv.work_time_id = 1 ) graf

				      Where frr.tabnfinwork  = dat.tabn(+)
                                            and frr.tabnfinwork is not null
ORDER BY kadry.pkg_Podr_Utils.Concat_Pos(Podr_Id, to_date($P{pdate2} , 'dd.mm.yyyy'))

) sel_vn
/* условие исключающее попадание на отчет по премированию бригад "Оперативно выездная бригада"  22.09.2010 Алена согласовала с Салыгиным*/
where sel_vn.podr_id not in (116 , 117 , 150 , 152 , 174 , 175 , 199 , 200 , 218 , 220 , 247 , 248 , 263 , 290 , 293 , 771 , 318 , 761 , 763 , 357 , 358 , 430 , 431 , 781 , 782 ,
456 , 457 , 896 ,  507 , 512 , 534 , 535 , 790 , 791 , 564 , 565 , 579 , 580 , 603 , 800,901)
group by sel_vn.podr_nazv , sel_vn.podr_id , sel_vn.main_podr_id , sel_vn.podr_nazv_main
       , sel_vn. tabn , sel_vn.fio ,  sel_vn.post_fin
ORDER BY kadry.pkg_Podr_Utils.Concat_Pos(sel_vn.Podr_Id, to_date($P{pdate2} , 'dd.mm.yyyy'))
) o
) o
where o.rw <=
/****************************************************************************************/
(select count(*)- 1 from
(
select sum(sel_vn.sumhoursotpusk) sumhoursotpusk   ,  sel_vn.podr_nazv , sel_vn.podr_id , sel_vn.main_podr_id , sel_vn.podr_nazv_main
       , sel_vn. tabn , sel_vn.fio ,  sel_vn.post_fin    from (
select   case when ((to_date('01.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
					       )
				              Then graf.rday1 else 0 end
				        +
				       case when ((to_date('02.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				              Then graf.rday2 else 0 end
				      +
				       case when ((to_date('03.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday3 else 0 end
				        +
				       case when ((to_date('04.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday4 else 0 end
				      +
				       case when ((to_date('05.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday5 else 0 end
				      +
				       case when ((to_date('06.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday6 else 0 end
				      +
				       case when ((to_date('07.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday7 else 0 end
				      +
				       case when ((to_date('08.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday8 else 0 end
				      +
				       case when ((to_date('09.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday9 else 0 end
				      +
				       case when ((to_date('10.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday10 else 0 end
				      +
				       case when ((to_date('11.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday11 else 0 end
				      +
				       case when ((to_date('12.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday12 else 0 end
				      +
				       case when ((to_date('13.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday13 else 0 end
				      +
				       case when ((to_date('14.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday14 else 0 end
				      +
				       case when ((to_date('15.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday15 else 0 end
				      +
				       case when ((to_date('16.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				                Then graf.rday16 else 0 end
				      +
				       case when ((to_date('17.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday17 else 0 end
				      +
				       case when ((to_date('18.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday18 else 0 end
				      +
				       case when ((to_date('19.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday19 else 0 end
				      +
				       case when ((to_date('20.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday20 else 0 end
				      +
				       case when ((to_date('21.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday21 else 0 end
				      +
				       case when ((to_date('22.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday22 else 0 end
				      +
				       case when ((to_date('23.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday23 else 0 end
				      +
				       case when ((to_date('24.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday24 else 0 end
				      +
				       case when ((to_date('25.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				       )
				               Then graf.rday25 else 0 end
				      +
				       case when ((to_date('26.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday26 else 0 end
				      +
				       case when ((to_date('27.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday27 else 0 end
				      +
				       case when ((to_date('28.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday28 else 0 end
				      +
				       case when (( mod(to_number(to_char(to_date($P{pdate2},'dd.mm.yyyy'),'yyyy')) , 4 ) = 0 ) and ( to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm') = '02' ))  or to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm') <> '02' then
				       case when ((to_date('29.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday29 else 0 end
				      else 0  end
				      +  case when to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm') not in ('02') then
				       case when ((to_date('30.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday30 else 0 end
				      else 0  end
				      +  case when to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm')  in ( '01' , '03', '05', '07', '08' , '10' , '12'  )  then
				       case when ((to_date('31.'||to_char(to_date($P{pdate2},'dd.mm.yyyy'),'mm.yyyy'),'dd.mm.yyyy') between dat.s and dat.po )
				        )
				               Then graf.rday31 else 0 end
				      else 0  end
				               sumhoursotpusk  ,


       podr_nazv , podr_id , main_podr_id , podr_nazv_main
       , tabnfinwork tabn , fio ,  post_fin  , dat.S, dat.PO
       From (

Select
  sel_podr.podr_nazv , sel_podr.podr_id , sel_podr.main_podr_id , sel_podr.podr_nazv_main
       , sel_hum.tabn tabnfinwork , sel_hum.fio , sel_hum.post_nazv post_fin

from (
SELECT
/* Назначение на Должность*/
  n.Id,
   /*Карточка*/
  n.Karta_Id,
  kr.TabN,
  fio.F||' '||fio.I||' '||fio.O FIO,
  DECODE(kr.S, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), kr.S) Karta_S,
  DECODE(kr.Po, TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), kr.Po) Karta_Po,
  kr.Sovm,
  DECODE(kr.Sovm,'1','V') Sovm_Show,
   /*назначение*/
  n.Date_Start,
  DECODE(n.Date_Finish, TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), n.Date_Finish) Date_Finish,
  n.Start_Pricaz_Id,
  pr1.Nomer      Start_Pricaz_Nomer,
  DECODE(pr1.Data, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), pr1.Data) Start_Pricaz_Data,
  /*pr1.Utver      Start_Pricaz_Utver,*/
  n.Finish_Pricaz_Id,
  pr2.Nomer      Finish_Pricaz_Nomer,
  DECODE(pr2.Data, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), pr2.Data) Finish_Pricaz_Data,
  /*pr2.Utver      Finish_Pricaz_Utver,*/

  DECODE(nd.Date_Start, n.Date_Start, TO_DATE(NULL), nd.Date_Start) Nazn_Day_Date_Start,
  nd.Pricaz_Id   Nazn_Day_Pricaz_Id,
  pr3.Nomer      Nazn_Day_Pricaz_Nomer,
  DECODE(pr3.Data, TO_DATE('01.01.1900','DD.MM.YYYY'), TO_DATE(NULL), pr3.Data) Nazn_Day_Pricaz_Data,
  /*pr3.Utver      Day_Pricaz_Utver,*/
  (SELECT COUNT(*) FROM kadry.Nazn_Day WHERE Nazn_Id = n.Id) Day_Count,

  DECODE(k.Prom_Id, 3,pd.Podr_Prom_Id, k.Prom_Id) Prom_Id,
  prom.Nazv       Prom_Nazv,
  prom.Sokr_Nazv  Prom_Sokr_Nazv,
  n.Doljnost_Id,
       pd.Podr_Id,
       pd.Podr_Kod,
       pd.Podr_Nazv,
       pd.Podr_Date_Start,
       ps.Post_Id,
       ps.KP_Kod,
       ps.OKPDTR_Kod,
  RTRIM(ps.Post_Nazv) Post_Nazv,
       nd.IO,
       DECODE(nd.IO,1,'И.О.', '') IO_Nazv,
       DECODE(nd.IO,1,'и.о. '||ps.Post_Nazv, ps.Post_Nazv) Post_Nazv_IO,

       pd.Ceh_Id,
       pd.Ceh_Kod,
       pd.Ceh_Nazv,

  nd.Stavka,
  NVL(nd.Oklad, DECODE (dd.OPLATA_VID_ID, 4,dd.Oklad,
      ROUND(ROUND(dd.Oklad*nd.Stavka,2)*NVL(nd.Uvel_Koef, dd.Uvel_Koef),2))) Oklad_New,
  NVL(nd.Oklad, dd.Oklad)            Oklad,
  NVL(nd.Tarif_Koef, dd.Tarif_Koef)  tarif_Koef,
  NVL(nd.Uvel_Koef, dd.Uvel_Koef)    Uvel_Koef,
       nd.Oklad           Nazn_Oklad,
       nd.tarif_Koef      Nazn_Tarif_Koef,
       nd.Uvel_Koef       Nazn_Uvel_Koef,
       nd.Vid_Vakans_Id,
       d.Date_Start       Doljnost_Date_Start,
  dd.Kod                  Doljnost_Kod,
  kadry.Pkg_Doljnost_Utils.Kod_Format(dd.Kod) Doljnost_Kod_S,
       d.Pos              Doljnost_Pos,
       dd.Date_Start      Doljnost_Day_Date_Start,
  dd.Oplata_Vid_Id,
  g.Norma           Grafik_Norma,
  d.Post_Id         Doljnost_Post_Id,
  ps1.KP_Kod        Doljnost_KP_Kod,
  ps1.OKPDTR_Kod    Doljnost_OKPDTR_Kod,
  RTRIM(ps1.Post_Nazv)  Doljnost_Post_Nazv,
  ps1.Prof_Id,
  ps1.Prof_Nazv,
  ps1.Razr_Id,
  ps1.Razr_Nazv,
  dd.Oklad          Doljnost_Oklad,
  dd.Tarif_Koef     Doljnost_Tarif_Koef,
  dd.Stavka         Doljnost_Stavka,
  nd.Prim,
/* предыдущее назначение*/
  n.Perevod_Vid_Id,


  DECODE(n.Perevod_Nazn_Id, NULL, '', pf2.NAZV||' '||ps2.Prof_Dopoln||' '||rz2.NAZV) Perevod_Post_Nazv,
  (SELECT Nazv
     FROM kadry.Podr_Day pd2
     WHERE Podr_Id = d2.Podr_Id
       AND n2.Date_Start between pd2.date_start and pd2.date_finish) Prev_Podr_Nazv,
/* следующее назначение*/
  n3.Perevod_Vid_Id     Next_Perevod_Vid_Id,
  pv3.Nazv              Next_Perevod_Vid_Nazv,
  DECODE(n3.id, null,'',
         DECODE(n3.date_start, TO_DATE('01.01.1900','DD.MM.YYYY'), '...',
                   TO_CHAR(n3.date_start, 'dd.mm.yyyy'))||' - '
           ||DECODE(n3.date_finish, TO_DATE('01.01.3000','DD.MM.YYYY'), '...',
                    TO_CHAR(n3.date_finish, 'dd.mm.yyyy'))) next_date_s_f,
  n3.Perevod_Osnova_Id  Next_Perevod_Osnova_Id,
  n3.perevod_osnova_add Next_Osnova_Add,
  os3.NKod              Next_Osnova_Kod,
  os3.Nazv              Next_Osnova_Nazv,
  n3.perevod_usl_id Next_perevod_usl_id,
  pu3.Kod Next_Usl_Kod,
  pu3.Nazv Next_Usl_Nazv,
  n3.Perevod_Nazn_Id    Next_Perevod_Nazn_Id,
  DECODE(n3.Perevod_Nazn_Id, NULL, '', pf3.NAZV||' '||ps3.Prof_Dopoln||' '||rz3.NAZV) Next_Perevod_Post_Nazv,
  (SELECT Nazv
     FROM kadry.Podr_Day pd3
     WHERE Podr_Id = d3.Podr_Id
       AND n3.Date_Start between pd3.date_start and pd3.date_finish) Next_Podr_Nazv,

  n.Karta_Link_Id,
  nd.Nazn_Vid_Id,
  nv.Nazv           Nazn_Vid_Nazv,
  nv.Vrem           Nazn_Vid_Vrem,
  DECODE(nv.Vrem,'1','V') Nazn_Vid_Vrem_Show,
/*  nd.Nepoln_Rab     Nepoln_Rab,*/
  nd.Regim_Add      Regim_Add,
  nd.Regim_Id       Regim_Id,
  r.Nazv            Regim_Nazv,
  nd.Post_id        pereopred_Post_id,
  ps.post_nazv      pereopred_post_nazv

FROM
  kadry.Prom            prom,
  kadry.Kategory        k,
  kadry.v_post          vp,
  (SELECT gp2.Grafik_Id, gp2.Norma
     FROM  kadry.Grafik_Period  gp2
     WHERE TO_DATE ($P{pdate2}, 'dd.mm.yyyy') BETWEEN gp2.S AND gp2.Po
       AND rownum<=1) g,
  kadry.Doljnost      d,
  kadry.Doljnost_Day  dd,
  (SELECT p.Id             Podr_Id,
          p.Date_Start     Podr_Date_Start,
          p.Date_Finish    Podr_Date_Finish,
          pd.ROWID         Podr_Day_Row_Id,
          pd.Podr_Id       Podr_Day_Podr_Id,
          pd.Date_Start    Podr_Day_Date_Start,
          pd.Main_Podr_Id  Main_Podr_Id,
          pd.Podr_Vid_Id   Podr_Vid_Id,
          pd.Nazv          Podr_Nazv,
          pd.Sokr_Nazv     Podr_Sokr_Nazv,
          pd.Kod           Podr_Kod,
          pd.Prom_Id       Podr_Prom_Id,
          pd.Pos           Podr_Pos,
          pd.Vne_Shtata    Vne_Shtata,
          ceh.ROWID        Ceh_Row_Id,
          ceh.Podr_Id      Ceh_Id,
          ceh.Date_Start   Ceh_Date_Start,
          ceh.Main_Podr_Id Ceh_Main_Podr_Id,
          ceh.Podr_Vid_Id  Ceh_Vid_Id,
          ceh.Nazv         Ceh_Nazv,
          ceh.Sokr_Nazv    Ceh_Sokr_Nazv,
          ceh.Kod          Ceh_Kod,
          ceh.Prom_Id      Ceh_Prom_Id,
          ceh.Pos          Ceh_Pos
     FROM kadry.Podr_Day  ceh,
          kadry.Podr_Day  pd,
          kadry.Podr      p
    WHERE pd.Podr_Id(+) = p.Id
      AND (pd.Podr_Id IS NULL
        OR pd.ROWID = (SELECT SUBSTR(MAX(TO_CHAR(pd1.Date_Start,'J')||ROWID),8)
                          FROM kadry.Podr_Day pd1
                         WHERE pd1.Podr_Id=pd.Podr_Id
                           AND pd1.Date_Start<=TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
          )
      AND ceh.Podr_Id = kadry.pkg_podr_utils.Get_Struct_Ed_Id_Buf(p.Id, TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
      AND ceh.ROWID = (SELECT SUBSTR(MAX(TO_CHAR(ceh1.date_start,'J')||ROWID),8)
                          FROM kadry.Podr_Day ceh1
                         WHERE ceh1.Podr_Id=ceh.Podr_Id
                           AND ceh1.Date_Start<=TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
      AND p.Id in (SELECT p.podr_id /*, p.podr_nazv ,  p.main_podr_id
   , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
*/
FROM
  kadry.v_Podr_All_Rab p/*,
  kadry.v_dostup       v*/
WHERE /*(v.Podr_List IS NULL OR INSTR(v.Podr_List, '_'||p.Podr_Id||'_') <> 0)
  AND*/ to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
  and  ((p.podr_vid_id = 9 ) or  ( p.main_podr_id in ( select p.podr_id from kadry.v_Podr_All_Rab p where p.ceh_id = $P{rencode}
                                                                                    and p.podr_vid_id = 9 )
                                             )  )
  and /*p.ceh_id*/ p.podr_id IN
  ----- viborka podr
  ( select   podr_id
    from (
SELECT p.podr_nazv , p.podr_id , p.main_podr_id
   , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
FROM
  kadry.v_Podr_All_Rab p/*,
  kadry.v_dostup       v*/
WHERE /*(v.Podr_List IS NULL OR INSTR(v.Podr_List, '_'||p.Podr_Id||'_') <> 0)
  AND*/ to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
  and  ((p.podr_vid_id = 9 ) or  ( p.main_podr_id in ( select p.podr_id from kadry.v_Podr_All_Rab p where p.ceh_id = $P{rencode}
                                                                                    and p.podr_vid_id = 9 )
                                             )  )
  and p.ceh_id = $P{rencode}

UNION
  /*юнион того где выбраное подразд в свою очередь тоже с признаком НВЗ и у него есть подчиненные */
  select podr_nazv , podr_id , main_podr_id , podr_nazv_main from
  (
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.podr_id = $P{rencode} )  )
  UNION
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.main_podr_id = $P{rencode} )  )

   )

)


 )
                        )
  ) pd,
  kadry.v_Post       ps,
  kadry.v_Post       ps1,


  kadry.Perevod_Vid  pv,
  kadry.perevod_usl  pu,
  kadry.Osnova       os,
  kadry.Nazn         n2,
  kadry.Doljnost     d2,
  kadry.Post         ps2,
  kadry.Razr         rz2,
  kadry.Prof         pf2,

  kadry.Perevod_Vid  pv3,
  kadry.perevod_usl  pu3,
  kadry.Osnova       os3,
  kadry.Nazn         n3,
  kadry.Doljnost     d3,
  kadry.Post         ps3,
  kadry.Razr         rz3,
  kadry.Prof         pf3,


  kadry.FIO          fio,
  kadry.Karta        kr,
  kadry.Nazn_Vid     nv,
  kadry.Pricaz       pr1,
  kadry.Pricaz       pr2,
  kadry.Pricaz       pr3,

  kadry.Regim        r,
  kadry.Nazn_Day     nd,
  kadry.Nazn         n

WHERE (nd.Nazn_Id = n.Id
  AND vp.Post_Id(+) = nd.post_id


  AND nd.Date_Start <= GREATEST(n.Date_Start, TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
  AND NOT EXISTS
     (SELECT NULL FROM kadry.s_Nazn_Day nd2
       WHERE nd2.Nazn_Id = nd.Nazn_Id
         AND nd2.Date_Start <= GREATEST(n.Date_Start, TO_DATE ($P{pdate2}, 'dd.mm.yyyy'))
         AND nd2.Date_Start > nd.Date_Start)
  AND n.Start_Pricaz_Id  = pr1.Id
  AND n.Finish_Pricaz_Id = pr2.Id
  AND nd.Pricaz_Id       = pr3.Id

  AND n.Doljnost_Id = d.Id
  AND pd.Podr_Id = d.Podr_Id

  AND ps.Post_Id = NVL(nd.Post_Id, d.Post_Id)
  AND ps1.Post_Id = d.Post_Id
  AND k.Id = d.Kategory_Id
  AND prom.Id = DECODE(k.Prom_Id, 3,pd.Podr_Prom_Id, k.Prom_Id)

  AND dd.Doljnost_Id(+) = d.Id

  AND (dd.Doljnost_Id IS NULL
    OR (dd.Date_Start <= n.Date_Finish
      AND NOT EXISTS (SELECT NULL FROM kadry.s_Doljnost_Day dd2
                      WHERE dd2.Doljnost_Id = dd.Doljnost_Id
                        AND dd2.Date_Start <= n.Date_Finish
                        AND dd2.Date_Start > dd.Date_Start)))

  AND dd.Grafik_Id = g.Grafik_Id(+)

  AND pv.Id(+) = n.Perevod_Vid_Id
  AND pu.id(+) = n.Perevod_Usl_id
  AND os.Id(+) = n.Perevod_Osnova_Id
  AND n.Perevod_Nazn_Id = n2.Id(+)
  AND n2.Doljnost_Id = d2.Id(+)
  AND ps2.Id(+) = d2.Post_Id
  AND pf2.Id(+) = ps2.Prof_Id
  AND rz2.Id(+) = ps2.Razr_Id

  AND n.Id = n3.Perevod_Nazn_Id(+)
  AND pu3.id(+) = n3.perevod_Usl_id
  AND pv3.Id(+) = n3.Perevod_Vid_Id
  AND os3.Id(+) = n3.Perevod_Osnova_Id
  AND d3.Id(+)  = n3.Doljnost_Id
  AND ps3.Id(+) = d3.Post_Id
  AND pf3.Id(+) = ps3.Prof_Id
  AND rz3.Id(+) = ps3.Razr_Id


  AND n.Karta_Id     = kr.Id
  AND kr.prim like ('%НВЗ%')
  and (kr.prim not like ('%DTU%') and kr.prim not like ('%IZ%') )
  AND fio.Id         = kr.FIO_Id
  AND nd.Nazn_Vid_Id = nv.Id(+)
  AND nd.Regim_Id  = r.Id(+)

) AND
      n.Date_Finish >= TO_DATE ($P{pdate2}, 'dd.mm.yyyy')
      and n.date_start < TO_DATE ($P{pdate2}, 'dd.mm.yyyy')  -- добавил условие т.к из финкол попадали лишние люди которые назначены выше даты среза
   --   AND ps1.prof_id IN (9086 , 7294 , 7241, 7242 , 7243 , 7244 , 7245 , 7246 , 7169, 7170 , 7173 , 7251 , 7252 , 7253 , 7254 , 7256 , 7269 , 7275 , 7295 , 7296 , 7334 , 8144 , 8455 , 8482 , 8496 , 8507 , 9049 ,8453)
  and (kr.prim not like ('%НВЗ_Е%') or kr.prim not like ('%НВЗ_Е%') )
  and (kr.prim not like ('%DTU%') and kr.prim not like ('%IZ%') )
 ORDER BY kadry.pkg_Podr_Utils.Concat_Pos(pd.Podr_Id, to_date($P{pdate2} , 'dd.mm.yyyy')) ,  kr.TabN, n.Date_Start desc

 ) sel_hum
   , ( select  podr_nazv , podr_id , main_podr_id
   , podr_nazv_main from (
SELECT p.podr_nazv , p.podr_id , p.main_podr_id
   , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
FROM
  kadry.v_Podr_All_Rab p/*,
  kadry.v_dostup       v*/
WHERE /*(v.Podr_List IS NULL OR INSTR(v.Podr_List, '_'||p.Podr_Id||'_') <> 0)
  AND */ to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
  and  ((p.podr_vid_id = 9 ) or  ( p.main_podr_id in ( select p.podr_id from kadry.v_Podr_All_Rab p where p.ceh_id = $P{rencode}
                                                                                    and p.podr_vid_id = 9 )
                                             )  )
  and p.ceh_id = $P{rencode}

UNION
  /*юнион того где выбраное подразд в свою очередь тоже с признаком НВЗ и у него есть подчиненные */
  select podr_nazv , podr_id , main_podr_id , podr_nazv_main from
  (
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.podr_id = $P{rencode} )  )
  UNION
  SELECT p.podr_nazv , p.podr_id , p.main_podr_id
     , nvl((select pp.podr_nazv from kadry.v_Podr_All_Rab pp where pp.podr_id = p.main_podr_id and pp.podr_vid_id = 9 ),' ') podr_nazv_main
    FROM   kadry.v_Podr_All_Rab p
   Where to_date($P{pdate2} , 'dd.mm.yyyy') BETWEEN p.Podr_Date_Start AND p.Podr_Date_Finish
     and  ((p.podr_vid_id = 9 ) and   ( p.main_podr_id = $P{rencode} )  )

   )

)

 ) sel_podr
Where sel_podr.podr_id = sel_hum.podr_id(+)
 /* and sel_podr.podr_id = 273 */
 /*убрал отсюда  order by */
) frr ,
(
				      SELECT
				       DECODE(odi.S,  TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), odi.S) S,
				       DECODE(odi.Po, TO_DATE('01.01.3000','DD.MM.YYYY'), TO_DATE(NULL), odi.PO) PO ,
				       k.tabn
				      FROM
				       kadry.vOtp    vo,
				       kadry.Karta   k,
				       kadry.Otp o,

				       kadry.Otp_Razdel r,
				       (select odi1.Id
				             , odi1.Otp_Id
				             , odi1.S
				             , odi1.Po
				             , odi1.Kol
				             , odi1.data_vvoda
				             , odi1.Kompens
				             , odi1.Mat_Pom
				             , odi1.Otp_Razdel_Id
				             , odi1.Osnova_Id

				             , odi1.Raspr
				             , odi1.Pricaz_Id
				            , p1.data
				             , p1.nomer
				             , p1.project
				          from kadry.Pricaz p1,
				               kadry.Otp_Dni_Ispolz odi1
				         where odi1.Pricaz_Id = p1.Id(+)
				          ) odi
				      WHERE ((vo.Id = o.vOtp_Id
				      AND o.Karta_Id = k.Id
				      AND odi.Otp_Razdel_Id = r.Id(+)
				      AND o.Id = odi.Otp_Id
				      ) AND o.Karta_Id = o.Karta_Id
				     /* and k.tabn = '67352'  */
                                  --     AND k.prim not like ('НВЗ_Е')  -- что б не попадали энергозбытовые люди
                       ) AND o.Karta_Id = o.Karta_Id
				                        /*  and k.tabn = frr.tabnfinwork */
				       and trunc(to_date($P{pdate2},'dd.mm.yyyy'),'mm') between trunc(odi.s,'mm') and last_day(odi.po)
				      ) dat

				      ,
( SELECT  rday1 , rday2 , rday3 , rday4 , rday5 , rday6 , rday7 , rday8 , rday9 , rday10,
				        rday11, rday12, rday13, rday14, rday15, rday16, rday17, rday18, rday19, rday20,
				        rday21, rday22, rday23, rday24, rday25, rday26, rday27, rday28, rday29, rday30, rday31 From zarpherson.grafik_work_view gwv
				      Where gwv.date_rasch = trunc(to_date($P{pdate2} , 'dd.mm.yyyy'),'mm')
				      and  gwv.work_time_id = 1 ) graf

				      Where frr.tabnfinwork  = dat.tabn(+)
                                            and frr.tabnfinwork is not null
ORDER BY kadry.pkg_Podr_Utils.Concat_Pos(Podr_Id, to_date($P{pdate2} , 'dd.mm.yyyy'))

) sel_vn
/* условие исключающее попадание на отчет по премированию бригад "Оперативно выездная бригада"  22.09.2010 Алена согласовала с Салыгиным*/
where sel_vn.podr_id not in (116 , 117 , 150 , 152 , 174 , 175 , 199 , 200 , 218 , 220 , 247 , 248 , 263 , 290 , 293 , 771 , 318 , 761 , 763 , 357 , 358 , 430 , 431 , 781 , 782 ,
456 , 457 , 896 , 507 , 512 , 534 , 535 , 790 , 791 , 564 , 565 , 579 , 580 , 603 , 800,901)
group by sel_vn.podr_nazv , sel_vn.podr_id , sel_vn.main_podr_id , sel_vn.podr_nazv_main
       , sel_vn. tabn , sel_vn.fio ,  sel_vn.post_fin
ORDER BY kadry.pkg_Podr_Utils.Concat_Pos(sel_vn.Podr_Id, to_date($P{pdate2} , 'dd.mm.yyyy'))
))
/****************************************************************************************/]]>
	</queryString>
	<field name="podr_nazv" class="java.lang.String"/>
	<field name="podr_id" class="java.lang.Integer"/>
	<field name="main_podr_id" class="java.lang.Integer"/>
	<field name="podr_nazv_main" class="java.lang.String"/>
	<field name="fio" class="java.lang.String"/>
	<field name="post_fin" class="java.lang.String">
		<fieldDescription><![CDATA[должность из кадров]]></fieldDescription>
	</field>
	<field name="sumhoursotpusk" class="java.math.BigDecimal"/>
	<field name="tabn" class="java.lang.String"/>
	<variable name="test" class="java.lang.String" incrementType="Group" incrementGroup="ee">
		<variableExpression><![CDATA[$V{test}]]></variableExpression>
		<initialValueExpression><![CDATA[$V{test}]]></initialValueExpression>
	</variable>
	<variable name="test2" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="Sum">
		<variableExpression><![CDATA[$V{test2}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_5" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_5}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_6" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_6}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_7" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_7}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_8" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_8}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_9" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_9}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_10" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_10}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_11" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_11}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_12" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_12}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_13" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_13}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_14" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_14}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_15" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_15}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_16" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_16}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_17" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_17}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_18" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_18}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_19" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_19}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_20" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_20}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_21" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_21}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_22" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_22}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_23" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_23}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_24" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_24}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_25" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_25}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_26" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_26}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_27" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_27}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_28" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_28}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_29" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_29}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_30" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_30}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_31" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_31}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_32" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_32}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_33" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_33}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_34" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_34}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_35" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_35}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_36" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_36}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_37" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_37}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="vv_count_personal" class="java.math.BigDecimal">
		<variableExpression><![CDATA[/*((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getPresentEltehpersonalFromKadry($P{pdate2}, $F{podr_id} , $F{tabn} )*/
new BigDecimal(1)]]></variableExpression>
	</variable>
	<variable name="altersession" class="java.math.BigDecimal" resetType="Group" resetGroup="alt" calculation="First">
		<variableExpression><![CDATA[((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).altersession()
/*new BigDecimal(1)*/]]></variableExpression>
	</variable>
	<variable name="sum_col_other" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_other}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="sum_col_other_avr" class="java.math.BigDecimal" incrementType="Group" incrementGroup="ee" calculation="System">
		<variableExpression><![CDATA[$V{sum_col_other_avr}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="brig_all_work" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{brig_all_work}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="brig_pr_ip_kr_work" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{brig_pr_ip_kr_work}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<group name="ee">
		<groupExpression><![CDATA[$F{podr_nazv}+$F{fio}+$F{post_fin}]]></groupExpression>
		<groupHeader>
			<band splitType="Stretch"/>
		</groupHeader>
		<groupFooter>
			<band splitType="Prevent"/>
		</groupFooter>
	</group>
	<group name="alt">
		<groupExpression><![CDATA[$P{pdate1}]]></groupExpression>
		<groupHeader>
			<band splitType="Stretch"/>
		</groupHeader>
		<groupFooter>
			<band splitType="Stretch"/>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="220" splitType="Prevent">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-11" stretchType="RelativeToTallestObject" x="812" y="0" width="30" height="200">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Розмір премії для нарахування (п.п.п.1.2.3.5. Положення про преміювання), %"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-17" stretchType="RelativeToTallestObject" x="162" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["2"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-6" stretchType="RelativeToTallestObject" x="502" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Кількість годин , які повинні відпрацювати електромонтери за місяць з урахуванням відпустки"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-2" stretchType="RelativeToTallestObject" x="162" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Кількість відпрацьованих бригадою (групою) люд.год. по всім видам робіт "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-23" stretchType="RelativeToTallestObject" x="542" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["8"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-21" stretchType="RelativeToTallestObject" x="382" y="200" width="120" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["6"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-29" stretchType="RelativeToTallestObject" x="777" y="200" width="35" height="20">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="local_mesure_unitwidth" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["14"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-1" stretchType="RelativeToTallestObject" x="3" y="0" width="159" height="200">
					<property name="local_mesure_unitwidth" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Найменування бригади, группи згідно зі штатним розписом"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-30" stretchType="RelativeToTallestObject" x="812" y="200" width="30" height="20">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["15"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-14" stretchType="RelativeToTallestObject" x="702" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Кількість відпрацьованих люд.год виконувачем по КР, Приєднанню, Інвестпрограмі"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-16" stretchType="RelativeToTallestObject" x="3" y="200" width="159" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["1"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-5" stretchType="RelativeToTallestObject" x="342" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Табельний номер працівника (виконавця робіт)"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-25" stretchType="RelativeToTallestObject" x="622" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["10"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-4" stretchType="RelativeToTallestObject" x="242" y="0" width="100" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["П.І.Б працівника "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-13" stretchType="RelativeToTallestObject" x="622" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Кількість відпрацьованих люд.год виконувачем робіт виробничого характеру "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-27" stretchType="RelativeToTallestObject" x="702" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["12"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-19" stretchType="RelativeToTallestObject" x="342" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["5"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-7" stretchType="RelativeToTallestObject" x="542" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Робота з персоналом , 5% від кількості годин які повинні відпрацювати електромонтери з урахуванням відпустки"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-20" stretchType="RelativeToTallestObject" x="242" y="200" width="100" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["4"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-8" stretchType="RelativeToTallestObject" x="662" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Витрати часу на проїзд по  КР, Приєднанню, Інвестпрограмі (год.)"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-18" stretchType="RelativeToTallestObject" x="202" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["3"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-9" stretchType="RelativeToTallestObject" x="742" y="0" width="35" height="200">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Відсоток завантаження виконувача робіт виробничого характеру (%) "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-15" stretchType="RelativeToTallestObject" x="382" y="0" width="120" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Найменування посади працівника згідно з штатним розписом"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-24" stretchType="RelativeToTallestObject" x="582" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["9"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-3" stretchType="RelativeToTallestObject" x="202" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Кількість відпрацьованих бригадою (групою) люд.год по КР, Приєднанню , Інвестпрограмі"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-28" stretchType="RelativeToTallestObject" x="742" y="200" width="35" height="20">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["13"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-10" stretchType="RelativeToTallestObject" x="777" y="0" width="35" height="200">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Відсоток завантаження виконувача по КР, Приєднанню, Інвестпрограммі (%) "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-26" stretchType="RelativeToTallestObject" x="662" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["11"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-12" stretchType="RelativeToTallestObject" x="582" y="0" width="40" height="200"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="Left">
					<font fontName="Times New Roman" size="11" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["Витрати часу на проїзд по всім видам робіт (год.) "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField-22" stretchType="RelativeToTallestObject" x="502" y="200" width="40" height="20"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="false" pdfFontName="times.ttf" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["7"]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="15" splitType="Prevent">
			<printWhenExpression><![CDATA[new Boolean($F{fio} != null)]]></printWhenExpression>
			<subreport isUsingCache="true">
				<reportElement key="subreport-1" stretchType="RelativeToTallestObject" mode="Transparent" x="3" y="0" width="839" height="15">
					<printWhenExpression><![CDATA[new Boolean($F{fio} != null  )]]></printWhenExpression>
				</reportElement>
				<parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
				<subreportParameter name="Ppodr_name">
					<subreportParameterExpression><![CDATA[($V{vv_count_personal}.doubleValue() > 0.01  ) ?
( $F{podr_nazv_main}== null  ? $F{podr_nazv} : $F{podr_nazv_main}   + " " + $F{podr_nazv})
 : $F{podr_nazv}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="Ppodrkod">
					<subreportParameterExpression><![CDATA[$F{podr_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="pdate1">
					<subreportParameterExpression><![CDATA[$P{pdate1}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="pdate2">
					<subreportParameterExpression><![CDATA[$P{pdate2}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="sumhoursotpusk">
					<subreportParameterExpression><![CDATA[/*$F{sumhoursotpusk}*/
((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getCountHoursOtpuskByHuman($P{pdate2}, $F{podr_id} , $F{tabn} )]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="fio_fin">
					<subreportParameterExpression><![CDATA[$F{fio}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="post_fin">
					<subreportParameterExpression><![CDATA[$F{post_fin}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="tabn_fin">
					<subreportParameterExpression><![CDATA[$F{tabn}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="plankind">
					<subreportParameterExpression><![CDATA[$P{plankind}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="v_getAllTabnInBrigada">
					<subreportParameterExpression><![CDATA[((com.ksoe.energynet.reports.common.FINScriptlet)$P{REPORT_SCRIPTLET}).getAllTabnInBrigada($P{pdate2} , $F{podr_id} )]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[(java.sql.Connection)$P{netConnection}]]></connectionExpression>
				<returnValue subreportVariable="brig_all_work" toVariable="brig_all_work" calculation="First"/>
				<returnValue subreportVariable="brig_pr_ip_kr_work" toVariable="brig_pr_ip_kr_work" calculation="First"/>
				<subreportExpression><![CDATA[getClass().getResourceAsStream("/com/ksoe/energynet/reports/RepPercentBonus2/RepBonusChild2.jasper")
/*"C:/iReport-3.0.0/tmp/RepBonusChild2.jasper"*/]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Prevent"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Prevent"/>
	</pageFooter>
	<summary>
		<band splitType="Prevent"/>
	</summary>
</jasperReport>
