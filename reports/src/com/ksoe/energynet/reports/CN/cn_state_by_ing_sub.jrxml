<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="d_TU_items_byt" pageWidth="950" pageHeight="800" orientation="Landscape" columnWidth="950" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isIgnorePagination="true">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<queryString>
		<![CDATA[select name, id_ren, ing,
first_column, second_column, third_column, fourth_column, fifth_column, sixth_column,
first_column + second_column + third_column + fourth_column + fifth_column + sixth_column as overal_column
 from
(
select  r.name, r.id_ren,
         u.fio as ing,

----- first_column_start -----
--00. Очікування підписання договору (30 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 1)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	 and id_state  between (select "idsFrom" from cn.business_processes where id = 31)
	   and (select "idsTo" from cn.business_processes where id = 31))  +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 1)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	 and id_state  between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32))  +

--01. Очікування здійснення плати за приєднання (7 робочих банківьских днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 2)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	 and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 2)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state  between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)) +

 --100. Очікування підписання договору
      (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (
        select id_state from cn.eap_hgr_columns_states where id_column = 12)
      and id_pack in (select id from cn.eap_packages
     where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5)))  +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (
        select id_state from cn.eap_hgr_columns_states where id_column = 12)
      and id_pack in (select id from cn.eap_packages
     where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5)))  as first_column,
----- first_column_end ------

----- second_column_start -----
--02. Розробка проектної документації в господарський спосіб (27 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 3)
      and id_pack in (select id from cn.eap_packages  where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31))  +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 3)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32))  +

--03. Розрахунок кошторису (3 календарних дня)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 4)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 4)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state  between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)) +

--04. Укладання договору підряду на розробку ПКД (5 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 5)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state  between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 5)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)) +

--05. Розробка ПКД підрядною організацією (25 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 6)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 6)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)) +

      --101. Очікування від Замовника розробленої ПКД
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 13)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 13)
      and id_pack in (select id from cn.eap_packages  where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

--102. Розгляд та погодження проектно-кошторисної документації
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 14)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 14)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) as second_column,
---- second_column_end -----

---- third_column_start -----
--13. Очікування відведення земельних ділянок
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 64)
      and id_pack in (select id from cn.eap_packages  where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	   and id_state  between (select "idsFrom" from cn.business_processes where id = 31)
	   and (select "idsTo" from cn.business_processes where id = 31)
    )  +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in ( select id_state from cn.eap_hgr_columns_states where id_column = 64)
      and id_pack in (select id from cn.eap_packages  where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state  between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)
    )  +

    --113. Очікування відведення земельних ділянок
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 65)
      and id_pack in (select id from cn.eap_packages
      where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    )  +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in ( select id_state from cn.eap_hgr_columns_states where id_column = 65)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) as third_column,

---- third_column_end -----

---- fourth_column_start ---

--06. Закупівля ТМЦ (40 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5)
	  and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 7)
      and (id_state not in (select id_state from cn.eap_hgr_columns_states where id_column = 9)
      or id_pack not in (select id_pack from cn.eap_movement where id_state in (
      select id_state from cn.eap_hgr_columns_states where id_state = 9)
      and id_state not in (select id_state  from cn.eap_hgr_columns_states where id_state = 7)))
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5)
	  and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 7)
      and (id_state not in (select id_state from cn.eap_hgr_columns_states where id_column = 9)
      or id_pack not in (select id_pack from cn.eap_movement where id_state in (
      select id_state from cn.eap_hgr_columns_states where id_state = 9)
      and id_state not in (select id_state from cn.eap_hgr_columns_states where id_state = 7)))
      and id_pack in (select id from cn.eap_packages  where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--07. Виконання робіт в господарський спосіб (15 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in ( select id_state from cn.eap_hgr_columns_states where id_column = 8)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 8)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	   and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--08. Укладання договору підряду на будівництво (10 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 9)
      and (id_state not in (select id_state from cn.eap_hgr_columns_states where id_column = 7)
      or id_pack in (select id_pack from cn.eap_movement where id_state in (
      select id_state from cn.eap_hgr_columns_states where id_state = 9)
      and id_state not in (select id_state from cn.eap_hgr_columns_states where id_state = 7)))
      and id_pack in (select id from cn.eap_packages  where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)
    )  +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (
        select id_state from cn.eap_hgr_columns_states where id_column = 9)
        and (id_state not in (select id_state from cn.eap_hgr_columns_states where id_column = 7)
        or id_pack in (select id_pack from cn.eap_movement where id_state in (
        select id_state from cn.eap_hgr_columns_states where id_state = 9)
        and id_state not in (select id_state from cn.eap_hgr_columns_states where id_state = 7)))
        and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	    and id_state  between (select "idsFrom" from cn.business_processes where id = 32)
	    and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--09. Виконання будівельних робіт в підрядний спосіб (45 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 10)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in ( select id_state from cn.eap_hgr_columns_states where id_column = 10)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--10. Підготовка та підписання актів виконаних робіт (5 календарних днів)
    (select count(distinct(id_pack)) from cn.eap_movement
     where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 11)
     and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column in (95, 96, 97)))
	and id_state between (select "idsFrom" from cn.business_processes where id = 31)
    and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 11)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
      select id_state from cn.eap_hgr_columns_states where id_column in (95, 96, 97)))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--106. Закупівля ТМЦ
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 18)
       and id_state not in (select id_state from cn.eap_hgr_columns_states where id_column = 20)
       and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 18)
       and id_state not in ( select id_state from cn.eap_hgr_columns_states where id_column = 20)
       and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

--107. Виконання робіт в господарський спосіб
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 19)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 19)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

--108. Укладання договору підряду на будівництво
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 20)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 20)
      and id_pack in (select id from cn.eap_packages  where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

--109. Виконання будівельних робіт в підрядний спосіб
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 21)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 21)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

--110. Підготовка та підписання актів виконаних робіт
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 22)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 22)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) as fourth_column,

---- fourth_column_end

---- fifth_column_start

--16. Очікування уточнень Замовника
    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 95)
    and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column in (89, 23, 90)))
	and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 95)
    and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column in (89, 23, 90)))
	and id_state  between (select "idsFrom" from cn.business_processes where id = 32)
	and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--17. Підготовка договору користування або постачання електроенергії
    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 96)
    and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column in (89, 23, 90)))
	and id_state  between (select "idsFrom" from cn.business_processes where id = 31)
	and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 96)
    and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column in (89, 23, 90)))
	and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--18. Підписання Замовником договору користування або постачання електроенергії
    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 97)
    and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column in (89, 23, 90)))
	and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 97)
    and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column in (89, 23, 90)))
	and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--111. Очікування укладання договору про користування або постачання
    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 40)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 40)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) as fifth_column,

---- fifth_column_end

---- sixth_column_start

--12. Підключення Замовника до електромереж
    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 23)
    and id_pack in (select id from cn.eap_packages  where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column = 90))
	and id_state between (select "idsFrom" from cn.business_processes where id = 31)
    and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 23)
    and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column = 90))
	and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--14. Очікування звернення Замовника за підключенням
    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 89)
    and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column = 90))
	and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
    where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 89)
    and id_pack in (select id from cn.eap_packages  where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	and id_pack not in (select id_pack from cn.eap_movement where id_movement_status in (1, 5) and id_state in (
    select id_state from cn.eap_hgr_columns_states where id_column = 90))
	and id_state between (select "idsFrom" from cn.business_processes where id = 32)
	 and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--15. Очікування підписання актів прийому-передачі виконаних робіт
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 90)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state between (select "idsFrom" from cn.business_processes where id = 31)
	  and (select "idsTo" from cn.business_processes where id = 31)
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 90)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
	  and id_state  between (select "idsFrom" from cn.business_processes where id = 32)
	  and (select "idsTo" from cn.business_processes where id = 32)
    ) +

--112. Підключення Замовника до електричних мереж
    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 24)
      and id_pack in (select id from cn.eap_packages where over5 = 0 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) +

    (select count(distinct(id_pack)) from cn.eap_movement
      where id_movement_status in (1, 5) and id_state in (select id_state from cn.eap_hgr_columns_states where id_column = 24)
      and id_pack in (select id from cn.eap_packages where over5 = 1 and id_ren = r.id_ren and id_pack_status in (1, 5))
    ) as sixth_column

    ---- sixth_column_end
from cn.cn_ren_report r, cn.cn_users u
where coalesce(r.exclude,0) = 0
and r.id_user = u.id
order by ing, r.id_ren
) as main_query]]>
	</queryString>
	<field name="name" class="java.lang.String"/>
	<field name="id_ren" class="java.lang.Integer"/>
	<field name="ing" class="java.lang.String"/>
	<field name="first_column" class="java.lang.Integer"/>
	<field name="second_column" class="java.lang.Integer"/>
	<field name="third_column" class="java.lang.Integer"/>
	<field name="fourth_column" class="java.lang.Integer"/>
	<field name="fifth_column" class="java.lang.Integer"/>
	<field name="sixth_column" class="java.lang.Integer"/>
	<field name="overal_column" class="java.lang.Integer"/>
	<variable name="first_column_sum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{first_column}]]></variableExpression>
	</variable>
	<variable name="second_column_sum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{second_column}]]></variableExpression>
	</variable>
	<variable name="third_column_sum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{third_column}]]></variableExpression>
	</variable>
	<variable name="fourth_column_sum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{fourth_column}]]></variableExpression>
	</variable>
	<variable name="fifth_column_sum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{fifth_column}]]></variableExpression>
	</variable>
	<variable name="sixth_column_sum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{sixth_column}]]></variableExpression>
	</variable>
	<variable name="overal_column_sum" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{overal_column}]]></variableExpression>
	</variable>
	<group name="ing">
		<groupExpression><![CDATA[$F{ing}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<textField>
					<reportElement x="0" y="0" width="950" height="20"/>
					<textElement>
						<font size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{ing}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="139">
			<staticText>
				<reportElement x="0" y="0" width="150" height="139"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Найменування РЕМ]]></text>
			</staticText>
			<staticText>
				<reportElement x="150" y="93" width="95" height="46"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Укладання договорів про приєднання]]></text>
			</staticText>
			<staticText>
				<reportElement x="245" y="93" width="95" height="46"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Розробка та/або погодження ПКД]]></text>
			</staticText>
			<staticText>
				<reportElement x="340" y="93" width="95" height="46"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Відведення земельних ділянок під будівництво електромереж]]></text>
			</staticText>
			<staticText>
				<reportElement x="435" y="0" width="200" height="93"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Проведення тендерних процедур з метою придбання обладнання та матеріалів для виконання робіт; виготовлення та поставка обладнання та матеріалів; виконання будівельно-монтажних робіт; пуско-наладжувальні та випробувальні роботи.]]></text>
			</staticText>
			<staticText>
				<reportElement x="635" y="0" width="125" height="139"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Укладення договору про користування електричною енергією або договору про постачання електричної енергії;]]></text>
			</staticText>
			<staticText>
				<reportElement x="760" y="0" width="95" height="139"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Підключення електроустановок (об'єкта) замовника;]]></text>
			</staticText>
			<staticText>
				<reportElement x="855" y="0" width="95" height="139"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Всього]]></text>
			</staticText>
			<staticText>
				<reportElement x="150" y="0" width="285" height="93"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Проектування та здійснення заходів щодо відведення земельних ділянок для розміщення відповідних об'єктів енергетики (у разі необхідності); експертиза та погодження проектної документаціїї з іншими заінтересованими сторонами;
отримання дозволу на виконання будівельно-монтажних робіт.]]></text>
			</staticText>
			<staticText>
				<reportElement x="435" y="93" width="200" height="46"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Виконання робіт]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="150" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="150" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{first_column}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="245" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{second_column}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="340" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{third_column}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="435" y="0" width="200" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{fourth_column}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="635" y="0" width="125" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{fifth_column}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="760" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{sixth_column}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="855" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$F{overal_column}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="150" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$V{first_column_sum}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="150" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA["Всього"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="245" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$V{second_column_sum}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="340" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$V{third_column_sum}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="435" y="0" width="200" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$V{fourth_column_sum}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="635" y="0" width="125" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$V{fifth_column_sum}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="760" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$V{sixth_column_sum}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="855" y="0" width="95" height="20"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textFieldExpression><![CDATA[$V{overal_column_sum}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
